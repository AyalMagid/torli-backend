(this.webpackJsonpbeautydee=this.webpackJsonpbeautydee||[]).push([[0],{134:function(e,t,a){e.exports=a(216)},140:function(e,t,a){},162:function(e,t,a){},164:function(e,t,a){},165:function(e,t,a){},166:function(e,t,a){},167:function(e,t,a){},168:function(e,t,a){},169:function(e,t,a){},170:function(e,t,a){},190:function(e,t,a){},191:function(e,t,a){},192:function(e,t,a){},193:function(e,t,a){},194:function(e,t,a){},195:function(e,t,a){},196:function(e,t,a){},197:function(e,t,a){},198:function(e,t,a){},199:function(e,t,a){},200:function(e,t,a){},201:function(e,t,a){},202:function(e,t,a){},203:function(e,t,a){},204:function(e,t,a){},205:function(e,t,a){},206:function(e,t,a){},207:function(e,t,a){},208:function(e,t,a){},209:function(e,t,a){},210:function(e,t,a){},211:function(e,t,a){},212:function(e,t,a){},213:function(e,t,a){},214:function(e,t,a){},215:function(e,t,a){},216:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(16),i=a.n(c),l=a(4),o=a.n(l),s=a(9),u=(a(140),a(10)),m=a(19),d=a(6),p=a(7),f=a(253),v=a(271),b=a(257),E={treatment:null,treatments:null,duration:0,availableDuration:0,pickedTreatmentsCount:0};var h={isModalOpen:!1};var g={step:0,steps:["\u05d1\u05d7\u05d9\u05e8\u05ea \u05d8\u05d9\u05e4\u05d5\u05dc\u05d9\u05dd "," \u05d1\u05d7\u05d9\u05e8\u05ea \u05ea\u05d5\u05e8","\u05d0\u05d9\u05e9\u05d5\u05e8"]};var k={calendar:null,timeSlots:null,hoursToBlock:null,slotToBlock:null,confirmedEventId:null,isDayFullyAvailable:!1,tableModel:[],recurrence:{isRecurrence:!1,freq:"DAILY",count:1}};var O=a(111),y=Object(O.a)(),T=a(112),N=a.n(T).a.create({withCredentials:!0}),j=function(e,t){return D(e,"GET",t)},w=function(e,t){return D(e,"POST",t)},S=function(e,t){return D(e,"PUT",t)},x=function(e,t){return D(e,"DELETE",t)};function D(e){return A.apply(this,arguments)}function A(){return(A=Object(s.a)(o.a.mark((function e(t){var a,n,r,c=arguments;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=c.length>1&&void 0!==c[1]?c[1]:"get",n=c.length>2&&void 0!==c[2]?c[2]:null,e.prev=2,e.next=5,N({url:"".concat("/api/").concat(t),method:a,data:n});case 5:return r=e.sent,e.abrupt("return",r.data);case 9:throw e.prev=9,e.t0=e.catch(2),console.log("Had Issues ".concat(a,"ing to the backend, endpoint: ").concat(t,", with data: ").concat(n)),console.dir(e.t0),e.t0.response&&401===e.t0.response.status&&y.push("/login"),e.t0;case 15:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}var C={saveToStorage:function(e,t){var a=JSON.stringify(t);localStorage.setItem(e,a)},loadFromStorage:function(e){var t=localStorage.getItem(e);return JSON.parse(t)},removeFromStorage:function(e){localStorage.removeItem(e)}};var I={getUsers:function(e){return R.apply(this,arguments)},getUser:function(e){return j("user/".concat(e))},addUser:function(e,t){return M.apply(this,arguments)},removeUser:function(e){return _.apply(this,arguments)},updateUser:function(e){return e.oldPhone=C.loadFromStorage("tori-user").phone,C.saveToStorage("tori-user",e),S("user/",e)},unshiftCellByPhoneNumber:function(e,t){var a=e.findIndex((function(e){return e.phone===t})),n=e.splice(a,1)[0];n.isMarked=!0;var r=Object(d.a)({},n);return e.unshift(r),e},getOwner:function(e){return j("user/owner/".concat(e))}};function U(e){return e.sort((function(e,t){return e.name.localeCompare(t.name)}))}function R(){return(R=Object(s.a)(o.a.mark((function e(t){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.next=3,j("user/workPlace/".concat(t));case 3:return a=e.sent,e.abrupt("return",U(a));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function M(){return(M=Object(s.a)(o.a.mark((function e(t,a){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.isMarked=!1,a||C.saveToStorage("tori-user",t),t.isAdmin=!1,e.next=5,w("user",t);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _(){return(_=Object(s.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return C.saveToStorage("tori-user",""),e.abrupt("return",x("user/".concat(t)));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var P={users:[],loggedInUser:null,userToSchedule:null,isAdShown:!1,userPhoneInContactSignup:"",owner:null};var B=a(51),L=a(113),F=Object(B.c)({TreatmentReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_TREATMENTS":return Object(d.a)(Object(d.a)({},e),{},{treatments:t.treatments});case"SET_TREATMENT":return Object(d.a)(Object(d.a)({},e),{},{treatment:t.treatment});case"REMOVE_TREATMENT":return Object(d.a)(Object(d.a)({},e),{},{treatments:e.treatments.filter((function(e){return e._id!==t.treatmentId}))});case"UPDATE_TREATMENTS":return Object(d.a)(Object(d.a)({},e),{},{treatments:t.treatments});case"UPDATE_PICKED_TREATMENTS_COUNT":return Object(d.a)(Object(d.a)({},e),{},{pickedTreatmentsCount:e.pickedTreatmentsCount+t.count});case"UPDATE_DURATION":return Object(d.a)(Object(d.a)({},e),{},{duration:e.duration+t.duration});case"UPDATE_AVAILBLE_DURATION":return Object(d.a)(Object(d.a)({},e),{},{availableDuration:e.availableDuration+t.availableDuration});case"INIT_DURATION":return Object(d.a)(Object(d.a)({},e),{},{duration:0,availableDuration:0});case"INIT_PICKED_TREATMENTS_COUNT":return Object(d.a)(Object(d.a)({},e),{},{pickedTreatmentsCount:0});default:return e}},CalendarReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CALENDAR":return Object(d.a)(Object(d.a)({},e),{},{calendar:t.calendar});case"SET_TIMESLOTS":return Object(d.a)(Object(d.a)({},e),{},{timeSlots:t.timeSlots});case"UPDATE_HOURS_TO_BLOCK":return Object(d.a)(Object(d.a)({},e),{},{slotsRangeToBlock:t.slotsRangeToBlock});case"UPDATE_SLOT_TO_BLOCK":return Object(d.a)(Object(d.a)({},e),{},{slotToBlock:t.slotToBlock});case"UPDATE_IS_DAY_FULLY_AVAILABLE":return Object(d.a)(Object(d.a)({},e),{},{isDayFullyAvailable:t.isDayFullyAvailable});case"UPDATE_RECURRENCE":return Object(d.a)(Object(d.a)({},e),{},{recurrence:t.recurrence});case"UPDATE_TABLE_MODEL":return Object(d.a)(Object(d.a)({},e),{},{tableModel:t.tableModel});default:return e}},StepperReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_ACTIVE_STEP":return Object(d.a)(Object(d.a)({},e),{},{step:t.step});default:return e}},UserReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USERS":return Object(d.a)(Object(d.a)({},e),{},{users:e.userPhoneInContactSignup?I.unshiftCellByPhoneNumber(t.users,e.userPhoneInContactSignup):t.users});case"UPDATE_USERS":return Object(d.a)(Object(d.a)({},e),{},{users:t.users});case"UPDATE_LOGEDIN_USER":return Object(d.a)(Object(d.a)({},e),{},{loggedInUser:t.loggedInUser});case"SET_USER_TO_SCHEDULE":return Object(d.a)(Object(d.a)({},e),{},{userToSchedule:t.userToSchedule});case"SET_OWNER":return Object(d.a)(Object(d.a)({},e),{},{owner:t.owner});case"UPDATE_USER_TO_SCHEDULE":return Object(d.a)(Object(d.a)({},e),{},{userToSchedule:t.userToSchedule});case"UPDATE_IS_AD_SHOWN":return Object(d.a)(Object(d.a)({},e),{},{isAdShown:t.isAdShown});case"UPDATE_NUMBER_IN_CONTACT_SIGNUP":return Object(d.a)(Object(d.a)({},e),{},{userPhoneInContactSignup:t.userPhoneInContactSignup});default:return e}},ModalReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_IS_MODAL_OPEN":return Object(d.a)(Object(d.a)({},e),{},{isModalOpen:t.isModalOpen});default:return e}}}),H=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||B.d,q=Object(B.e)(F,H(Object(B.a)(L.a))),W={initApp:function(){q.dispatch({type:"UPDATE_ACTIVE_STEP",step:0}),q.dispatch({type:"SET_TREATMENT",treatment:null}),q.dispatch({type:"SET_TREATMENTS",treatments:null}),q.dispatch({type:"SET_TIMESLOTS",timeSlots:null}),q.dispatch({type:"INIT_DURATION"}),q.dispatch({type:"INIT_PICKED_TREATMENTS_COUNT"})}};a(162);var V=Object(m.h)(Object(u.b)((function(e){return{owner:e.UserReducer.owner}}),{})((function(e){var t=r.a.useState(0),a=Object(p.a)(t,2),c=a[0],i=a[1],l=Object(m.f)();Object(n.useEffect)((function(){"/cancelAppointment"!==l.pathname?i(0):i(1)}),[c,l]);var o={width:"28%",boxShadow:"none",color:"white"};return r.a.createElement(f.a,{position:"static",style:{boxShadow:"none"}},r.a.createElement(v.a,{value:c,onChange:function(t,a){i(a),1===a?e.history.push("/cancelAppointment"):e.history.push("/treatments")},className:"tabs flex space-between"},r.a.createElement(b.a,{label:"\u05d6\u05d9\u05de\u05d5\u05df \u05ea\u05d5\u05e8",style:o}),r.a.createElement(b.a,{label:"\u05d4\u05ea\u05d5\u05e8\u05d9\u05dd \u05e9\u05dc\u05d9",style:o}),r.a.createElement("h2",{onClick:function(){W.initApp(),e.history.push("/".concat(e.owner.workPlace))},id:"text",className:"logo"}," Tori",r.a.createElement("i",{className:"fas fa-tasks"}))))}))),Z=a(119),G=a(258),Y=a(259),J=a(277),K=a(260),z=a(273),X=(a(164),Object(Z.a)({palette:{primary:{main:"#273650"}}})),$=Object(G.a)((function(e){return{root:{width:"100%"}}}));var Q=Object(u.b)((function(e){return{steps:e.StepperReducer.steps,activeStep:e.StepperReducer.step}}),{})((function(e){var t=$();return r.a.createElement("div",{className:t.root},r.a.createElement(Y.a,{theme:X},r.a.createElement(J.a,{activeStep:e.activeStep},e.steps.map((function(e,t){var a={};return r.a.createElement(K.a,Object.assign({key:e},{}),r.a.createElement(z.a,a,e,"  "))})))))}));a(165);var ee=Object(m.h)(Object(u.b)((function(e){return{owner:e.UserReducer.owner}}),{})((function(e){var t=Object(m.f)(),a=Object(n.useState)(!1),c=Object(p.a)(a,2),i=c[0],l=c[1];return Object(n.useEffect)((function(){var e={isHeader:!1,noHeaderMargin:!1,isStepper:!1,isTabs:!1};switch(t.pathname){case"/":case"/calendarAdmin/":l(!1);break;case"/advertise":case"/signupOrLogin":case"/signup":case"/login":l(Object(d.a)(Object(d.a)({},e),{},{isHeader:!0,noHeaderMargin:!0}));break;case"/treatments":l(Object(d.a)(Object(d.a)({},e),{},{isStepper:!0,isTabs:!0}));break;case"/calendar":l(Object(d.a)(Object(d.a)({},e),{},{isStepper:!0,isHeader:!0,noHeaderMargin:!0}));break;case"/form":l(Object(d.a)(Object(d.a)({},e),{},{isHeader:!0,isStepper:!0}));break;case"/cancelAppointment":l(Object(d.a)(Object(d.a)({},e),{},{isTabs:!0}));break;case"/editUser":l(Object(d.a)(Object(d.a)({},e),{},{isHeader:!0,noHeaderMargin:!0}));break;default:l(!1)}}),[t.pathname]),r.a.createElement(r.a.Fragment,null,i&&r.a.createElement("div",{className:"".concat(i.noHeaderMargin?"app-header-no-margin":"app-header")},i.isHeader?r.a.createElement("header",{className:"flex upper-header align-center"},r.a.createElement("h2",{onClick:function(){W.initApp(),e.history.push("/".concat(e.owner.workPlace))},id:"text",className:"logo"}," Tori",r.a.createElement("i",{className:"fas fa-tasks"}))):"",i.isTabs?r.a.createElement(V,null):"",i.isStepper?r.a.createElement(Q,null):""))}))),te={englishToHebrew:function(e){var t;switch(e){case"minutes":t="\u05d3\u05e7\u05f3";break;case"build":t="\u05d1\u05e0\u05d9\u05d9\u05d4";break;case"filling":t="\u05de\u05d9\u05dc\u05d5\u05d9";break;case"medical-manicure":t="\u05de\u05e0\u05d9\u05e7\u05d5\u05e8 \u05e8\u05e4\u05d5\u05d0\u05d9";break;case"gel":t="\u05dc\u05e7 \u05d2\u05f3\u05dc";break;case"medical-pedicure":t="\u05e4\u05d3\u05d9\u05e7\u05d5\u05e8";break;case"medical-pedicure-gel":t="\u05e4\u05d3\u05d9\u05e7\u05d5\u05e8 \u05e8\u05e4\u05d5\u05d0\u05d9 \u05e2\u05dd \u05dc\u05e7 \u05d2\u05f3\u05dc";break;case"half-pedicure":t="\u05d7\u05e6\u05d9 \u05e4\u05d3\u05d9\u05e7\u05d5\u05e8";break;case"half-pedicure-gel":t="\u05d7\u05e6\u05d9 \u05e4\u05d3\u05d9\u05e7\u05d5\u05e8 \u05e2\u05dd \u05d2\u05f3\u05dc";break;case"eyebrows-mustache":t="\u05d2\u05d1\u05d5\u05ea \u05d5\u05e9\u05e4\u05dd";break;default:t="\u05d1\u05e8\u05d9\u05e8\u05ea \u05de\u05d7\u05d3\u05dc"}return" "+t},getIsosDate:ae,getTimeSlotsForPreview:re,getDailySlotsForPreview:ne,changeTimeForDisplay:ce,idGen:function(){return"_"+Math.random().toString(36).substr(2,9)},calculateEndTime:function(e,t){var a=+e.slice(0,2),n=e.slice(3,5);t%60===30?30===+n?(a+=Math.floor(t/60)+1,n="00"):(a+=Math.floor(t/60),n="30"):a+=t/60;return(a=ie(a))+":"+n},arrayToString:function(e){var t="";return e.forEach((function(a,n){e.length!==n+1?t+=a.name+", ":t+=a.name})),t},convertDateToIsraelisDisplay:le,convertDateTo4DigitsDisplay:function(e){var t=e.split("-");return"0"===t[2].slice(0,1)?"".concat(t[2].slice(1,2),".").concat(t[1]):"".concat(t[2].slice(0,2),".").concat(t[1])},getDayByHebrewWord:function(e){return["\u05e8\u05d0\u05e9\u05d5\u05df","\u05e9\u05e0\u05d9","\u05e9\u05dc\u05d9\u05e9\u05d9","\u05e8\u05d1\u05d9\u05e2\u05d9","\u05d7\u05de\u05d9\u05e9\u05d9","\u05e9\u05d9\u05e9\u05d9","\u05e9\u05d1\u05ea"][e]},getEventReadyForDisplay:function(e){return e.map((function(e){return{id:e._id,treatments:e.treatments,startTime:ce(e.startTime,-2),endTime:ce(e.endTime,-2),date:le(e.date),email:e.email,name:e.name}}))},convertNumberToWords:function(e){return["\u05d0\u05d7\u05d3","\u05e9\u05e0\u05d9","\u05e9\u05dc\u05d5\u05e9\u05d4","\u05d0\u05e8\u05d1\u05e2\u05d4","\u05d7\u05de\u05e9\u05d4","\u05e9\u05e9\u05d4","\u05e9\u05d1\u05e2\u05d4","\u05e9\u05de\u05d5\u05e0\u05d4","\u05ea\u05e9\u05e2\u05d4","\u05e2\u05e9\u05e8\u05d4","\u05d0\u05d7\u05d3 \u05e2\u05e9\u05e8","\u05e9\u05ea\u05d9\u05d9\u05dd \u05e2\u05e9\u05e8","\u05e9\u05dc\u05d5\u05e9\u05d4 \u05e2\u05e9\u05e8","\u05d0\u05e8\u05d1\u05e2 \u05e2\u05e9\u05e8","\u05d7\u05de\u05d9\u05e9\u05d4 \u05e2\u05e9\u05e8","\u05e9\u05e9\u05d4 \u05e2\u05e9\u05e8"][e-1]},validateEmail:function(e){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase())},getWeekIsosDatesForCalendar:function(e,t){var a=[];6===t.getDay()&&(t=new Date(t.getTime()+864e5),e=1);switch(e){case 1:for(var n=0;n<6;n++)a.push(ae(n,t));break;case 2:for(n=-1;n<5;n++)a.push(ae(n,t));break;case 3:for(n=-2;n<4;n++)a.push(ae(n,t));break;case 4:for(n=-3;n<3;n++)a.push(ae(n,t));break;case 5:for(n=-4;n<2;n++)a.push(ae(n,t));break;case 6:for(n=-5;n<1;n++)a.push(ae(n,t));break;default:console.log("Err with getting week dates")}return a.map((function(e){return{start:"".concat(e,"T06:00:00Z"),end:"".concat(e,"T18:00:00Z")}}))},checkIfTsInRange:function(e,t,a,n){var r=ce(e,-2),c=ne([{start:t,end:a}],n);return c.length?{occupied:c.includes(r),rowspan:c.length}:t.slice(11,16)===e?{occupied:!0,rowspan:1}:{occupied:!1,rowspan:1}},getMonthByIdx:function(e){return["\u05d9\u05e0\u05d5\u05d0\u05e8","\u05e4\u05d1\u05e8\u05d5\u05d0\u05e8","\u05de\u05e8\u05e5","\u05d0\u05e4\u05e8\u05d9\u05dc","\u05de\u05d0\u05d9","\u05d9\u05d5\u05e0\u05d9","\u05d9\u05d5\u05dc\u05d9","\u05d0\u05d5\u05d2\u05d5\u05e1\u05d8","\u05e1\u05e4\u05d8\u05de\u05d1\u05e8","\u05d0\u05d5\u05e7\u05d8\u05d5\u05d1\u05e8","\u05e0\u05d5\u05d1\u05de\u05d1\u05e8","\u05d3\u05e6\u05de\u05d1\u05e8"][e-1]},timeToDisplay:function(e){"0"===e.slice(0,1)&&(e=e.slice(1,5));return e},getSplitedEventDesc:function(e){var t=e.split(" - ");return{name:t[0],treatment:t[1]}},convertDurationToApiStr:function(e){return e/60+"H"},calculateDuration:function(e,t){var a=60*+e.slice(0,2),n=+e.slice(3,5),r=60*+t.slice(0,2),c=+t.slice(3,5);return r-a+c-n},dateToDisplay:function(e){"0"===e.slice(0,1)&&(e=e.slice(1,10));return e},getArray:function(e,t){var a=[];t&&(a[0]=t);for(var n=0;n<e;n++)a.push(n);return a}};function ae(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Date,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=new Date(t.getTime());return n.setDate(n.getDate()+e),6!==n.getDay()||a?n=n.toISOString().slice(0,10):""}function ne(e,t){var a=e.map((function(e){return re(e,t)}));return[].concat.apply([],a)}function re(e,t){var a=[],n=e.start.slice(0,4),r=e.start.slice(5,7),c=e.start.slice(8,10),i=+e.start.slice(11,13),l=e.start.slice(14,16),o=new Date(n,r-1,c,i+2,l,0,0);n=e.end.slice(0,4),r=e.end.slice(5,7),c=e.end.slice(8,10),i=+e.end.slice(11,13),l=e.end.slice(14,16);var s=new Date(n,r-1,c,i+2,l,0,0),u=o;i=u.getHours(),l=u.getMinutes();var m=ie(i)+":"+ie(l);for(u.getTime()+60*t*1e3<=s.getTime()&&a.push(m);u.getTime()+60*t*1e3<s.getTime();)i=(u=new Date(u.getTime()+18e5)).getHours(),l=u.getMinutes(),m=ie(i)+":"+ie(l),a.push(m);return a}function ce(e,t){var a=+e.slice(0,2)-t,n=e.slice(3,5);return(a=ie(a))+":"+n}function ie(e){return e=e<10?"0"+e:e}function le(e){var t=e.split("-");return"".concat(t[2],"/").concat(t[1],"/").concat(t[0])}var oe={getTreatments:function(e){return j("treatment/owner/".concat(e))},getById:function(e){return j("treatment/".concat(e))},remove:function(e){return x("treatment/".concat(e))},update:function(e){return S("treatment/".concat(e._id),e)},updateTreatments:function(e,t){var a=e.findIndex((function(e){return e._id===t._id}));return e[a]=t,e},getMarkedTreatmentsStr:function(e){return e=e.filter((function(e){return e.marked})),te.arrayToString(e)}};function se(e){return function(){var t=Object(s.a)(o.a.mark((function t(a){var n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,oe.getTreatments(e);case 3:n=t.sent,a(ue(n)),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log("TreatmentActions: err in loadTreatments",t.t0);case 10:case 11:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()}function ue(e){return{type:"SET_TREATMENTS",treatments:e}}function me(e){return function(){var t=Object(s.a)(o.a.mark((function t(a){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,a(de(e));case 3:t.next=8;break;case 5:t.prev=5,t.t0=t.catch(0),console.log("TreatmentActions: err in setTreatment",t.t0);case 8:case"end":return t.stop()}}),t,null,[[0,5]])})));return function(e){return t.apply(this,arguments)}}()}function de(e){return{type:"SET_TREATMENT",treatment:e}}function pe(e){return{type:"UPDATE_PICKED_TREATMENTS_COUNT",count:e}}function fe(e){return{type:"UPDATE_TREATMENTS",treatments:e}}function ve(e){return{type:"UPDATE_DURATION",duration:e}}function be(e){return{type:"UPDATE_AVAILBLE_DURATION",availableDuration:e}}function Ee(e){return console.log("action ",e),function(){var t=Object(s.a)(o.a.mark((function t(a){var n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,I.getUsers(e);case 3:n=t.sent,a(he(n)),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log("userActions: err in loadUsers",t.t0);case 10:case 11:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()}function he(e){return{type:"SET_USERS",users:e}}function ge(e){return function(){var t=Object(s.a)(o.a.mark((function t(a){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{a(ke(e))}catch(n){console.log("userActions: err in loadUsers",n)}case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}function ke(e){return{type:"UPDATE_USERS",users:e}}function Oe(e){return{type:"SET_OWNER",owner:e}}function ye(e){return function(){var t=Object(s.a)(o.a.mark((function t(a){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{a(Te(e))}catch(n){console.log("userActions: err in updateUser",n)}case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}function Te(e){return{type:"UPDATE_LOGEDIN_USER",loggedInUser:e}}function Ne(e){return function(t){t(function(e){return{type:"UPDATE_USER_TO_SCHEDULE",userToSchedule:e}}(e))}}function je(e){return function(t){t(function(e){return{type:"UPDATE_NUMBER_IN_CONTACT_SIGNUP",userPhoneInContactSignup:e}}(e))}}var we=a(56),Se=a(57),xe=a(59),De=a(58),Ae=a(83),Ce=a(23),Ie=a(117),Ue=a.n(Ie),Re=a(270),Me=a(275),_e=a(278),Pe=(a(166),Object(Z.a)({direction:"rtl"})),Be=Object(Ce.b)({plugins:[].concat(Object(Ae.a)(Object(Re.a)().plugins),[Ue()()])});function Le(e){var t=Object(n.useState)(e.marked),a=Object(p.a)(t,2),c=a[0],i=a[1];return r.a.createElement(Me.b,{jss:Be},r.a.createElement(Y.a,{theme:Pe},r.a.createElement("div",{dir:"rtl"},r.a.createElement(_e.a,{checked:c,onChange:function(t){c?(e.updateDuration(!1),e.updatePickedTreatments(!1)):(e.updateDuration(!0),e.updatePickedTreatments(!0)),i(t.target.checked)},name:"checked",inputProps:{"aria-label":"secondary checkbox"}}))))}a(167);var Fe=function(e){Object(xe.a)(a,e);var t=Object(De.a)(a);function a(){var e;Object(we.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={updatedTreatment:e.props.treatment,treatmentsToUpdate:e.props.treatments},e.updateDuration=function(t){t?e.props.updateDuration(+e.props.treatment.duration):e.props.updateDuration(-1*+e.props.treatment.duration)},e.updatePickedTreatments=function(t){e.setState({updatedTreatment:Object(d.a)(Object(d.a)({},e.state.updatedTreatment),{},{marked:t})},(function(){t?e.props.updateTreatmentsCount(1):e.props.updateTreatmentsCount(-1);var a=oe.updateTreatments(e.state.treatmentsToUpdate,e.state.updatedTreatment);e.setState({treatmentsToUpdate:a})}))},e}return Object(Se.a)(a,[{key:"render",value:function(){var e=this.state.updatedTreatment;return r.a.createElement("div",{className:"treatment-preview ".concat(e.marked?"marked-by-switch":"")},e&&r.a.createElement("div",{className:" preview-container flex align-center space-between"},r.a.createElement("div",{className:"align-col-name"},e.name),r.a.createElement("div",{className:"align-col"},"\u20aa"+e.price),r.a.createElement("div",{className:"align-col"},e.duration+te.englishToHebrew("minutes")),r.a.createElement(Le,{className:"align-col",marked:e.marked,updateDuration:this.updateDuration,updatePickedTreatments:this.updatePickedTreatments})))}}]),a}(n.Component);var He={updateDuration:function(e){return function(){var t=Object(s.a)(o.a.mark((function t(a){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,a(ve(e));case 3:t.next=8;break;case 5:t.prev=5,t.t0=t.catch(0),console.log("TreatmentActions: err in addDuration",t.t0);case 8:case"end":return t.stop()}}),t,null,[[0,5]])})));return function(e){return t.apply(this,arguments)}}()},updateTreatments:function(e){return console.log(e),function(){var t=Object(s.a)(o.a.mark((function t(a){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,a(fe(e));case 3:t.next=8;break;case 5:t.prev=5,t.t0=t.catch(0),console.log("TreatmentActions: err in updateTreatments",t.t0);case 8:case"end":return t.stop()}}),t,null,[[0,5]])})));return function(e){return t.apply(this,arguments)}}()},updateTreatmentsCount:function(e){return function(){var t=Object(s.a)(o.a.mark((function t(a){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,a(pe(e));case 3:t.next=8;break;case 5:t.prev=5,t.t0=t.catch(0),console.log("TreatmentActions: err in setTreatment",t.t0);case 8:case"end":return t.stop()}}),t,null,[[0,5]])})));return function(e){return t.apply(this,arguments)}}()}},qe=Object(u.b)((function(e){return{treatments:e.TreatmentReducer.treatments}}),He)(Fe);a(168);function We(e){return r.a.createElement("div",{className:"treatment-list main-container flex column"},e.treatments.map((function(t){var a=te.idGen();return r.a.createElement("div",{key:a},r.a.createElement(qe,{treatment:t,getTreatmentsToUpdate:e.getTreatmentsToUpdate}))})))}a(169);var Ve=Object(m.h)(Object(u.b)((function(e){return{pickedTreatmentsCount:e.TreatmentReducer.pickedTreatmentsCount,availableDuration:e.TreatmentReducer.availableDuration,duration:e.TreatmentReducer.duration}}),{})((function(e){var t="/calendarAdmin/treatments"===Object(m.f)().pathname,a=e.duration>e.availableDuration;return r.a.createElement("div",{className:"treatment-title ".concat(t?"treatment-title-in-modal":""," \n         ").concat(t&&a?"pink-title-treatments-modal":"")},t?r.a.createElement("div",{className:"back-arrow",onClick:function(){return e.history.push("/calendarAdmin/contacts")}},r.a.createElement("i",{class:"fas fa-arrow-right"})):"",r.a.createElement("div",{className:"treatment-title-text"},a&&t?"\u05de\u05e9\u05da \u05d6\u05de\u05df \u05d4\u05d8\u05d9\u05e4\u05d5\u05dc\u05d9\u05dd \u05d0\u05e8\u05d5\u05da \u05de\u05d9\u05d3\u05d9 ! ":e.pickedTreatmentsCount?1===e.pickedTreatmentsCount?"\u05e0\u05d1\u05d7\u05e8 \u05d8\u05d9\u05e4\u05d5\u05dc  ".concat(te.convertNumberToWords(e.pickedTreatmentsCount),"     "):"\u05e0\u05d1\u05d7\u05e8\u05d5 ".concat(te.convertNumberToWords(e.pickedTreatmentsCount)," \u05d8\u05d9\u05e4\u05d5\u05dc\u05d9\u05dd "):e.isClicked?r.a.createElement("span",{className:"red-title"},"\u05dc\u05d0 \u05e0\u05d1\u05d7\u05e8\u05d5 \u05d8\u05d9\u05e4\u05d5\u05dc\u05d9\u05dd!"):t?"\u05d1\u05d7\u05e8\u05d5 \u05e1\u05d5\u05d2 \u05d8\u05d9\u05e4\u05d5\u05dc \u05d0\u05d7\u05d3 \u05d0\u05d5 \u05d9\u05d5\u05ea\u05e8":"  \u05d1\u05d7\u05e8\u05d5  \u05e1\u05d5\u05d2  \u05d8\u05d9\u05e4\u05d5\u05dc  \u05d0\u05d7\u05d3  \u05d0\u05d5  \u05d9\u05d5\u05ea\u05e8  \u05d5\u05dc\u05d7\u05e6\u05d5  '\u05d4\u05d1\u05d0'"),r.a.createElement("div",{className:"modal-header-cls-btn-space"}))})));function Ze(e){return function(){var t=Object(s.a)(o.a.mark((function t(a){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,a(Ge(e));case 3:t.next=8;break;case 5:t.prev=5,t.t0=t.catch(0),console.log("StepperActions: err in updateActiveStep",t.t0);case 8:case"end":return t.stop()}}),t,null,[[0,5]])})));return function(e){return t.apply(this,arguments)}}()}function Ge(e){return{type:"UPDATE_ACTIVE_STEP",step:e}}a(170);var Ye={updateActiveStep:Ze},Je=Object(m.h)(Object(u.b)((function(e){return{steps:e.StepperReducer.steps,activeStep:e.StepperReducer.step,duration:e.TreatmentReducer.duration,treatment:e.TreatmentReducer.treatment}}),Ye)((function(e){var t=Object(m.f)(),a=Object(n.useState)(""),c=Object(p.a)(a,2),i=c[0],l=c[1];function o(){return!e.duration||(2===e.activeStep&&!e.treatment||void 0)}function s(t){e.activeStep+t===3&&(e.setAppointment(),e.handleOpen()),e.updateActiveStep(e.activeStep+t),!e.activeStep&&t>0?e.history.push("/calendar"):1===e.activeStep&&t>0?e.history.push("/form"):2===e.activeStep&&t<0?e.history.push("/calendar"):1===e.activeStep&&t<0&&e.history.push("/treatments")}return Object(n.useEffect)((function(){2===e.activeStep&&!e.treatment||e.duration?l("active-btn"):l("")})),r.a.createElement("div",{className:"nav-btns-container"},"/treatments"===t.pathname?r.a.createElement("div",{className:"nav-btn-wrapper-next",onClick:function(){e.duration||e.updateTitleProp()}},r.a.createElement("button",{className:"nav-btn-next",onClick:function(){return s(1)},disabled:o()},"\u05d4\u05d1\u05d0")):"/form"!==t.pathname?r.a.createElement("div",{className:"nav-btn-wrapper"},r.a.createElement("button",{className:"nav-btn active-btn",disabled:0===e.activeStep,onClick:function(){return s(-1)}},"\u05d7\u05d6\u05d5\u05e8")):r.a.createElement("div",{className:"flex btns-wrraper"},r.a.createElement("div",{className:"nav-btn-wrapper"},r.a.createElement("button",{className:"nav-btn active-btn",disabled:0===e.activeStep,onClick:function(){return s(-1)}},"\u05d7\u05d6\u05d5\u05e8")),r.a.createElement("div",{className:"nav-btn-wrapper"},r.a.createElement("button",{className:"nav-btn ".concat(i),onClick:function(){return s(1)},disabled:o()},"\u05d0\u05d9\u05e9\u05d5\u05e8"))))}))),Ke=a(20),ze={getMotionStyle:function(e){return"pageVariants"===e?{in:{opacity:1,x:"0"},out:{opacity:0,x:"50%"}}:"pageTransition"===e?{duration:.5,type:"spring",stiffness:50}:{in:{opacity:1,x:"0",textAlign:"center"},out:{opacity:0,x:"50%"}}}};var Xe=a(118),$e=a.n(Xe),Qe=function(e){Object(xe.a)(a,e);var t=Object(De.a)(a);function a(){return Object(we.a)(this,a),t.apply(this,arguments)}return Object(Se.a)(a,[{key:"render",value:function(){return r.a.createElement($e.a,{type:"Oval",color:"var(--color1)",height:75,width:75,timeout:3e3})}}]),a}(r.a.Component);a(190),a(88);var et={loadTreatments:se,setUserToSchedule:function(){return function(e){e(function(e){return{type:"SET_USER_TO_SCHEDULE",userToSchedule:e}}(C.loadFromStorage("tori-user")))}},updateUserToSchedule:Ne},tt=Object(u.b)((function(e){return{treatments:e.TreatmentReducer.treatments,userToSchedule:e.UserReducer.userToSchedule,loggedInUser:e.UserReducer.loggedInUser,owner:e.UserReducer.owner}}),et)((function(e){var t=Object(m.f)(),a=e.loadTreatments,c=e.treatments,i=e.setUserToSchedule,l=e.userToSchedule;Object(n.useEffect)((function(){c||a(e.owner.workPlace)}),[a,c]),Object(n.useEffect)((function(){console.log(c)}),[c]),Object(n.useEffect)((function(){Object(s.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:l||e.loggedInUser.isAdmin||i();case 1:case"end":return t.stop()}}),t)})))()}),[i,l]);var u=Object(n.useState)(!1),d=Object(p.a)(u,2),f=d[0],v=d[1];return c?r.a.createElement("div",{className:"treatment-app"},"/calendarAdmin/treatments"!==t.pathname?r.a.createElement(Ke.a.div,{initial:"out",exit:"in",animate:"in",variants:ze.getMotionStyle("pageVariants"),transition:ze.getMotionStyle("pageTransition")},r.a.createElement(Ve,{isClicked:f}),r.a.createElement(We,{treatments:c})):r.a.createElement("div",null,r.a.createElement(Ve,{isClicked:f}),r.a.createElement(We,{treatments:c})),"/calendarAdmin/treatments"!==t.pathname&&r.a.createElement(Je,{updateTitleProp:function(){v(!0)}})):r.a.createElement("div",{className:"loader"},r.a.createElement(Qe,null))})),at=(a(191),function(e){Object(xe.a)(a,e);var t=Object(De.a)(a);function a(){var e;Object(we.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={treatment:e.props.treatment},e.pickedTreatment=function(){e.props.setTreatment(e.props.treatment),e.props.history.push("/treatmentToEdit")},e}return Object(Se.a)(a,[{key:"render",value:function(){var e=this.state.treatment;return r.a.createElement("div",{className:"treatment-preview ".concat(e.marked?"marked-by-switch":"")},e&&r.a.createElement("div",{onClick:this.pickedTreatment,className:" preview-container flex align-center space-between"},r.a.createElement("div",{className:"align-col-name"},e.name),r.a.createElement("div",{className:"align-col"},"\u20aa"+e.price),r.a.createElement("div",{className:"align-col"},e.duration+te.englishToHebrew("minutes"))))}}]),a}(n.Component));var nt={setTreatment:me},rt=Object(m.h)(Object(u.b)((function(e){return{treatments:e.TreatmentReducer.treatments}}),nt)(at));a(192);function ct(e){return r.a.createElement("div",{className:"treatment-list main-container flex column"},e.treatments.map((function(t){var a=te.idGen();return r.a.createElement("div",{key:a},r.a.createElement(rt,{treatment:t,getTreatmentsToUpdate:e.getTreatmentsToUpdate}))})))}a(193);var it={loadTreatments:se};Object(u.b)((function(e){return{treatments:e.TreatmentReducer.treatments}}),it)((function(e){var t=e.loadTreatments,a=e.treatments;return Object(n.useEffect)((function(){a||t()}),[t,a]),a?r.a.createElement("div",{className:"treatment-app"},r.a.createElement(Ke.a.div,{initial:"out",exit:"in",animate:"in",variants:ze.getMotionStyle("pageVariants"),transition:ze.getMotionStyle("pageTransition")},r.a.createElement(ct,{treatments:a}))):r.a.createElement("div",{className:"loader"},r.a.createElement(Qe,null))})),a(194);Object(m.h)(Object(u.b)((function(e){return{treatment:e.TreatmentReducer.treatment}}),{})((function(e){var t=r.a.useState(te.getArray(1003,e.treatment.price)),a=Object(p.a)(t,2),n=a[0],c=(a[1],r.a.useState(te.getArray(10,e.treatment.duration))),i=Object(p.a)(c,2),l=i[0],o=(i[1],r.a.useState({name:e.treatment.name,min:"",amount:""})),s=Object(p.a)(o,2),u=s[0],m=s[1],f=r.a.useState(0),v=Object(p.a)(f,2),b=v[0],E=v[1];function h(e){var t=e.target,a=t.name,n=t.value;switch(console.log(a,"field"),console.log(n,"value"),a){case"min":m(Object(d.a)(Object(d.a)({},u),{},{min:0===n?l[0]:30*n})),E(n);break;case"amount":m(Object(d.a)(Object(d.a)({},u),{},{amount:n}));break;case"name":m(Object(d.a)(Object(d.a)({},u),{},{name:n}));break;default:console.log("Err updating name/amount/min")}}return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("div",null,"\u05e1\u05d5\u05d2 \u05d8\u05d9\u05e4\u05d5\u05dc"),r.a.createElement("input",{name:"name",value:u.name,onChange:h})),r.a.createElement("div",null,r.a.createElement("div",null,"\u05de\u05e9\u05da \u05d6\u05de\u05df \u05d4\u05d8\u05d9\u05e4\u05d5\u05dc"),r.a.createElement("select",{name:"min",onChange:h},l.map((function(e,t){var a=te.idGen();return r.a.createElement("option",{name:"min",key:a,selected:b===t,value:t},0===t?l[0]:30*t," \u05d3\u05e7\u05d5\u05ea")})))),r.a.createElement("div",null,r.a.createElement("div",null,"\u05de\u05d7\u05d9\u05e8 \u05d4\u05d8\u05d9\u05e4\u05d5\u05dc"),r.a.createElement("select",{name:"amount",size:"1",onChange:h},n.map((function(e,t){var a=te.idGen();return r.a.createElement("option",{name:"amount",key:a,value:0===t?n[0]:t},0===t?n[0]:t," \u20aa")})))),r.a.createElement("button",{onClick:function(){console.log(u)}},"press"))})));var lt=a(81),ot=a(82),st=a(25),ut=a(269);a(195);var mt={setTreatment:me,updateActiveStep:Ze},dt=Object(m.h)(Object(u.b)((function(e){return{treatment:e.TreatmentReducer.treatment,activeStep:e.StepperReducer.step}}),mt)((function(e){return r.a.createElement("div",{id:"idForScrollBar",className:"daily-slots flex column align-center space-between"},e.timeSlots.map((function(t){return r.a.createElement("button",{onClick:function(){return function(t,a,n){e.updateActiveStep(e.activeStep+n);var r={time:t,date:a};e.setTreatment(r),e.history.push("/form")}(t,e.date,1)},className:"timeslot-btn",key:te.idGen()},te.timeToDisplay(t))})))})));a(196);function pt(e){return Object(n.useEffect)((function(){}),[]),r.a.createElement("div",{className:"timeslot-list flex"},Object.keys(e.timeSlots).map((function(t){var a="string"==typeof e.timeSlots[t],n=a?e.timeSlots[t].slice(0,10):e.timeSlots[t][0].start.slice(0,10),c=a?[]:te.getDailySlotsForPreview(e.timeSlots[t],e.duration);return r.a.createElement("div",{key:te.idGen()},r.a.createElement("div",{className:"date-container"},c.length?r.a.createElement("div",null,r.a.createElement("div",null,"".concat(te.getDayByHebrewWord(new Date(n).getDay())," - ").concat(te.convertDateTo4DigitsDisplay(n)))):r.a.createElement("div",{className:"fully-booked"},r.a.createElement("div",null,"".concat(te.getDayByHebrewWord(new Date(n).getDay())," - ").concat(te.convertDateTo4DigitsDisplay(n))),r.a.createElement("div",{className:"fully-booked-title"},"\u05d0\u05d9\u05df \u05ea\u05d5\u05e8 \u05e4\u05e0\u05d5\u05d9"))),r.a.createElement(dt,{timeSlots:c,date:n}))})))}var ft={saveConfirmedEvent:function(e){return w("event",e)},getMongoEventByEventCalendarId:function(e){return j("event/".concat(e))},getReccurenceMongoEventBySubStrId:function(e){return vt.apply(this,arguments)},getEventByPhone:function(e){return j("event/".concat(e))},removeEventFromDB:function(e){return x("event/".concat(e))}};function vt(){return(vt=Object(s.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j("event/reccurence/".concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var bt={sendEmail:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=arguments.length>3?arguments[3]:void 0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"",l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"",o="\u05e0\u05d9\u05d9\u05dc \u05e1\u05dc\u05d5\u05df",s="";s=n?"        \u05e9\u05dc\u05d5\u05dd ".concat(e," ,\n\n        \u05e9\u05de\u05d7\u05d9\u05dd \u05e9\u05d1\u05d7\u05e8\u05ea ").concat(o," !\n        \u05e0\u05e7\u05d1\u05e2 \u05dc\u05da \u05ea\u05d5\u05e8 \u05dc").concat(l,"  \n        \u05d1\u05ea\u05d0\u05e8\u05d9\u05da ").concat(t,"\n        \u05d1\u05e9\u05e2\u05d4 ").concat(i,"\n        \u05de\u05e9\u05da \u05d6\u05de\u05df \u05d4\u05d8\u05d9\u05e4\u05d5\u05dc \u05de\u05d5\u05e2\u05e8\u05da \u05db- ").concat(c," \u05d3\u05e7\u05d5\u05ea\n        \u05d4\u05d8\u05dc\u05e4\u05d5\u05df \u05e9\u05d4\u05ea\u05e7\u05d1\u05dc \u05dc\u05d9\u05e6\u05d9\u05e8\u05ea \u05e7\u05e9\u05e8 \u05d4\u05d5\u05d0 - ").concat(r,"\n        \n        \u05ea\u05d5\u05d3\u05d4"):"\n        \u05e9\u05dc\u05d5\u05dd,\n         ".concat(e,"\n        \u05d4\u05ea\u05d5\u05e8 \u05e9\u05e0\u05e7\u05d1\u05e2 \u05dc\u05ea\u05d0\u05e8\u05d9\u05da ").concat(t," \u05d1\u05d5\u05d8\u05dc \n        \u05ea\u05d5\u05d3\u05d4 \u05e2\u05dc \u05d4\u05e2\u05d3\u05db\u05d5\u05df ");var u={email:a,bodyText:s};return w("email",u)}};var Et={getCalendar:function(){return j("calendar")},getAvailbleDailySlots:Tt,addEventToCalendar:gt,addRecurrenceToCalendar:kt,removeEventFromCalendar:function(e){return yt.apply(this,arguments)},setAppointment:function(e,t,a,n,r,c,i){return jt.apply(this,arguments)},getEventsFromCalendar:function(e){return ht.apply(this,arguments)},buildWeeklyModel:function(e,t){for(var a=[],n=0;n<e.length;n++)a.push([]);return e.map((function(e,n){t.map((function(t,r){if(t.length){var c=!1;return t.map((function(r,i){te.checkIfTsInRange(e,r.start,r.end,30).occupied?(c=!0,a[n].push(!1)):t.length!==i+1||c||a[n].push(!0)}))}a[n].push(!0)}))})),a},getAvailbleDuration:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:30,n=0,r=t.tsIdx;for(;e[r][t.dailyIdx]&&r<e.length-1;)n+=a,r++;return n||a},getHoursToBlock:function(e,t,a,n,r){for(var c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:30,i=[],l=e.findIndex((function(e){return e===t})),o=a/c,s=l;s<l+o;s++)i.push({date:n,start:t,end:e[s+1],isMarked:!1});r&&(i.unshift({date:n,start:e[0],end:e[e.length-1],isMarked:!1}),t===e[0]&&i.pop());return i},blockSlotRange:function(e){return xt.apply(this,arguments)},getDatesWeeklyRange:function(e){var t=te.getWeekIsosDatesForCalendar(e.getDay()+1,e),a=te.convertDateToIsraelisDisplay(t[0].start.slice(0,10));return{lastDay:te.convertDateToIsraelisDisplay(t[t.length-1].start.slice(0,10)),firstDay:a}}};function ht(){return(ht=Object(s.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j("calendar/".concat(t.start,"/").concat(t.end));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function gt(e,t,a){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"block",r=arguments.length>4?arguments[4]:void 0,c=arguments.length>5?arguments[5]:void 0,i={eventName:a,creatorName:n,creatorEmail:r,startTime:e,endTime:t,owner:c};return w("calendar",i)}function kt(e,t,a){return Ot.apply(this,arguments)}function Ot(){return(Ot=Object(s.a)(o.a.mark((function e(t,a,n){var r,c,i,l,s,u,m=arguments;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=m.length>3&&void 0!==m[3]?m[3]:"block",c=m.length>4?m[4]:void 0,i=m.length>5?m[5]:void 0,l=i.token,s=i.accountId,u={eventName:n,creatorName:r,startTime:t,endTime:a,recurrence:c,token:l,accountId:s},e.abrupt("return",w("calendar/recurrence",u));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function yt(){return(yt=Object(s.a)(o.a.mark((function e(t){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x("calendar",t);case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Tt(e,t,a,n){return Nt.apply(this,arguments)}function Nt(){return(Nt=Object(s.a)(o.a.mark((function e(t,a,n,r){var c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c={startTime:t,endtTime:a,duration:n,owner:r},e.next=3,w("calendar/slots",c);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function jt(){return(jt=Object(s.a)(o.a.mark((function e(t,a,n,r,c,i,l){var s,u,m,d,p;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=te.changeTimeForDisplay(i.time,2),s,u="".concat(i.date,"T").concat(s,":00Z"),s=te.calculateEndTime(s,a),m="".concat(i.date,"T").concat(s,":00Z"),e.next=7,gt(u,m,t,c,"ayal@gmail.com",l);case 7:return d=e.sent,p={name:c,email:r,phone:n,eventId:d.id,treatments:t,duration:a,startTime:u.slice(11,20),endTime:m.slice(11,20),date:u.slice(0,10),accountId:l.accountId,calendarId:l.calendarId,token:l.token,workPlace:l.workPlace},ft.saveConfirmedEvent(p),bt.sendEmail(c,i.date,r,!0,n,a,i.time,t),e.abrupt("return",d);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function wt(e,t,a,n,r,c){return St.apply(this,arguments)}function St(){return(St=Object(s.a)(o.a.mark((function e(t,a,n,r,c,i){var l,s,u,m,d,p,f;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:l=[],m=te.getIsosDate(0,t),d="DAILY"===c.freq?1:7,p=!0,r=te.convertDurationToApiStr(r),f=0;case 6:if(!(f<c.count)){e.next=17;break}return s="".concat(m,"T").concat(a,":00Z"),u="".concat(m,"T").concat(n,":00Z"),e.next=11,Tt(s,u,r,i);case 11:"string"===typeof e.sent&&l.push(m),m=te.getIsosDate(f+d,t,p);case 14:f++,e.next=6;break;case 17:return console.log(l),e.abrupt("return",l);case 19:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function xt(){return(xt=Object(s.a)(o.a.mark((function e(t){var a,n,r,c,i,l,s,u,m,d,p,f=arguments;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=f.length>1&&void 0!==f[1]?f[1]:"block",n=f.length>2?f[2]:void 0,r=f.length>3?f[3]:void 0,c=te.changeTimeForDisplay(t.start,2),i=te.changeTimeForDisplay(t.end,2),l="".concat(t.date,"T").concat(c,":00Z"),s="".concat(t.date,"T").concat(i,":00Z"),u=te.calculateDuration(c,i),1!==+n.count){e.next=15;break}return e.next=11,gt(l,s,a,"block","",r);case 11:m=e.sent,console.log("herer"),e.next=26;break;case 15:return e.next=17,wt(new Date("".concat(t.date,"T02:00:00Z")),c,i,u,n,r);case 17:if((d=e.sent).length){e.next=24;break}return e.next=21,kt(l,s,a,"block",n,r);case 21:m=e.sent,e.next=26;break;case 24:return console.log("recurrence is not possible - the xx date is already full",d),e.abrupt("return",d);case 26:return console.log("adsasd",m),p={name:a,email:"",phone:"",eventId:m.id,treatments:"",duration:"",startTime:l.slice(11,20),endTime:s.slice(11,20),date:l.slice(0,10),accountId:r.accountId,calendarId:r.calendarId,token:r.token,workPlace:r.workPlace},ft.saveConfirmedEvent(p),e.abrupt("return",m);case 30:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Dt(e){return{type:"SET_TIMESLOTS",timeSlots:e}}function At(e){return function(t){t(function(e){return{type:"UPDATE_HOURS_TO_BLOCK",slotsRangeToBlock:e}}(e))}}var Ct=a(79),It=(a(197),Object(Z.a)({overrides:{MuiPickersToolbar:{toolbar:{backgroundColor:"#e91e63"}},MuiPickersDay:{day:{color:"black"},daySelected:{backgroundColor:"#e91e63"},dayDisabled:{color:"#e91e63"},current:{color:"#e91e63"}}}}));var Ut={loadTimeSlots:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,a=arguments.length>1?arguments[1]:void 0;if(t)e=t,n=te.getIsosDate(0,t),r=te.getIsosDate(1,t),c=te.getIsosDate(2,t);else{e=new Date;var n=te.getIsosDate(0),r=te.getIsosDate(1),c=te.getIsosDate(2)}return n||(n=te.getIsosDate(1,e),r=te.getIsosDate(2,e),c=te.getIsosDate(3,e)),r||(n=te.getIsosDate(0,e),r=te.getIsosDate(2,e),c=te.getIsosDate(3,e)),c||(n=te.getIsosDate(0,e),r=te.getIsosDate(1,e),c=te.getIsosDate(3,e)),function(){var e=Object(s.a)(o.a.mark((function e(t){var i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Et.getAvailbleDailySlots("".concat(n,"T06:00:00"),"".concat(n,"T18:00:00"),"1H",a);case 3:return e.t0=e.sent,e.next=6,Et.getAvailbleDailySlots("".concat(r,"T06:00:00"),"".concat(r,"T18:00:00"),"1H",a);case 6:return e.t1=e.sent,e.next=9,Et.getAvailbleDailySlots("".concat(c,"T06:00:00"),"".concat(c,"T18:00:00"),"1H",a);case 9:e.t2=e.sent,i={firstDaySlots:e.t0,secondDaySlots:e.t1,thirdDaySlots:e.t2},t(Dt(i)),e.next=17;break;case 14:e.prev=14,e.t3=e.catch(0),console.log("Err getting timeslots",e.t3);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t){return e.apply(this,arguments)}}()}},Rt=Object(u.b)((function(e){return{timeSlots:e.CalendarReducer.timeSlots,duration:e.TreatmentReducer.duration,owner:e.UserReducer.owner}}),Ut)((function(e){var t=Object(n.useState)(new Date),a=Object(p.a)(t,2),c=a[0],i=a[1],l=Object(n.useState)(!1),u=Object(p.a)(l,2),m=u[0],d=u[1],f=Object(n.useState)("\u05d1\u05d7\u05e8\u05d5 \u05ea\u05d0\u05e8\u05d9\u05da \u05d5\u05e9\u05e2\u05d4, \u05e0\u05d9\u05ea\u05df \u05dc\u05d4\u05d7\u05dc\u05d9\u05e7 \u05d9\u05de\u05d9\u05e0\u05d4/\u05e9\u05de\u05d0\u05dc\u05d4 "),v=Object(p.a)(f,2),b=v[0],E=v[1],h=Object(n.useState)("date-picker-title"),g=Object(p.a)(h,2),k=g[0],O=g[1],y=Object(n.useState)(!1),T=Object(p.a)(y,2),N=T[0],j=T[1],w=e.loadTimeSlots;function S(e){return x.apply(this,arguments)}function x(){return(x=Object(s.a)(o.a.mark((function t(a){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return d(!0),i(a),t.next=4,e.loadTimeSlots(a,e.owner);case 4:e.timeSlots&&d(!1);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(n.useEffect)((function(){w(null,e.owner),e.timeSlots&&d(!1)}),[w]),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"weekly-dates-container weekly-dates-container-calendar-app flex space-between align-center",onClick:function(){return j(!0)}},r.a.createElement("i",{className:"calendar-icon-in-calendar fas fa-calendar-week"}),r.a.createElement("div",{className:"date-range-in-calendar"},te.convertDateToIsraelisDisplay(te.getIsosDate(0,c)),r.a.createElement("br",null),""!==te.getIsosDate(2,c)?te.convertDateToIsraelisDisplay(te.getIsosDate(2,c)):te.convertDateToIsraelisDisplay(te.getIsosDate(3,c)))),r.a.createElement(Ke.a.div,{initial:"out",exit:"in",animate:"in",variants:ze.getMotionStyle("pageVariantsWithTextAlign"),transition:ze.getMotionStyle("pageTransition"),style:{width:"100%"}},r.a.createElement("div",{className:"calendar-picker-container"},r.a.createElement("div",{className:"".concat(k)},b)),r.a.createElement(st.a,{utils:lt.a,locale:ot.a},r.a.createElement(Y.a,{theme:It},r.a.createElement(ut.a,{disablePast:!0,shouldDisableDate:function(e){return 6===e.getDay()},variant:"dialog",okLabel:"\u05d0\u05d9\u05e9\u05d5\u05e8",cancelLabel:"\u05d1\u05d9\u05d8\u05d5\u05dc",open:N,onOpen:function(){return j(!0)},onClose:function(){return j(!1)},format:"MM/dd/yyyy",id:"date-picker-inline",disableToolbar:!0,value:c,onChange:S,InputProps:{disableUnderline:!0,style:{width:"0"}},keyboardbuttonprops:{"aria-label":"change date"}}))),r.a.createElement(Ct.a,{onSwiped:function(t){return function(t){if(e.timeSlots&&!m){var a=new Date(c.setDate(c.getDate()));"Left"===t&&c.getTime()>(new Date).getTime()?a.getDay()-1===-1||a.getDay()-2===-1||a.getDay()-3===-1?S(new Date(c.setDate(c.getDate()-4))):S(new Date(c.setDate(c.getDate()-3))):"Right"===t?a.getDay()+1===6||a.getDay()+2===6||a.getDay()+3===6?S(new Date(c.setDate(c.getDate()+4))):S(new Date(c.setDate(c.getDate()+3))):"Up"!==t&&"Down"!==t&&(E("\u05dc\u05d0 \u05e0\u05d9\u05ea\u05df \u05dc\u05d1\u05d7\u05d5\u05e8 \u05ea\u05d0\u05e8\u05d9\u05da \u05e9\u05e2\u05d1\u05e8"),O("picker-red-title"),setTimeout((function(){E("\u05d1\u05d7\u05e8\u05d5 \u05ea\u05d0\u05e8\u05d9\u05da \u05d5\u05e9\u05e2\u05d4, \u05e0\u05d9\u05ea\u05df \u05dc\u05d4\u05d7\u05dc\u05d9\u05e7 \u05d9\u05de\u05d9\u05e0\u05d4/\u05e9\u05de\u05d0\u05dc\u05d4 "),O("date-picker-title")}),3e3))}}(t.dir)}},r.a.createElement("div",{className:"time-slot-lists-container"},e.timeSlots&&!m?r.a.createElement(pt,{date:c,timeSlots:e.timeSlots,duration:e.duration}):r.a.createElement("div",{className:"loaderContainer flex  justify-center"},r.a.createElement(Qe,null))))),r.a.createElement(Je,null))}));function Mt(e){return function(){var t=Object(s.a)(o.a.mark((function t(a){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{a(_t(e))}catch(n){console.log("modalAction: err in updateIsModalOpen",n)}case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}function _t(e){return{type:"UPDATE_IS_MODAL_OPEN",isModalOpen:e}}a(198);var Pt={updateIsModalOpen:Mt},Bt=Object(m.h)(Object(u.b)((function(e){return{isModalOpen:e.ModalReducer.isModalOpen,owner:e.UserReducer.owner}}),Pt)((function(e){var t=Object(m.f)(),a=Object(n.useState)(""),c=Object(p.a)(a,2),i=c[0],l=c[1],o="/adminContacts"===t.pathname;Object(n.useEffect)((function(){l(o?"ad-modal-in-in-admin-contacts":"ad-modal-in")}),[]);var s=function(){l(o?"ad-modal-out-in-admin-contacts":"ad-modal-out"),setTimeout((function(){e.updateIsModalOpen(!1),l(o?"ad-modal-in-in-admin-contacts":"ad-modal-in"),"/form"===t.pathname&&e.history.push("/".concat(e.owner.workPlace)),"/form"!==t.pathname&&"/cancelAppointment"!==t.pathname||W.initApp()}),500)};return r.a.createElement(r.a.Fragment,null,e.isModalOpen&&r.a.createElement("div",{className:"main-modal-container"},r.a.createElement("div",{className:"ad-modal-screen ".concat(o?"modal-screen-admin-contacts":""),onClick:s}," "),r.a.createElement("div",{className:"ad-modal ".concat(i)},r.a.createElement("div",{className:"advertise-content"},e.modalContent),r.a.createElement("button",{className:"ad-modal-btn",onClick:s}," \u05d0\u05d9\u05e9\u05d5\u05e8"))))})));a(199);var Lt={updateActiveStep:Ze,setTimeSlots:Dt,updateIsModalOpen:Mt},Ft=Object(m.h)(Object(u.b)((function(e){return{treatments:e.TreatmentReducer.treatments,treatment:e.TreatmentReducer.treatment,duration:e.TreatmentReducer.duration,userToSchedule:e.UserReducer.userToSchedule,owner:e.UserReducer.owner}}),Lt)((function(e){var t=Object(m.f)(),a=r.a.useState(""),c=Object(p.a)(a,2),i=c[0],l=c[1],u=te.convertDateToIsraelisDisplay(e.treatment.date),d=te.calculateEndTime(e.treatment.time,e.duration),f=e.userToSchedule,v=f.name,b=f.phone,E=f.email;function h(){return(h=Object(s.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Et.setAppointment(i,e.duration,b,E,v,e.treatment,e.owner);case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}Object(n.useEffect)((function(){l(oe.getMarkedTreatmentsStr(e.treatments))}),[e.treatments]);var g="/calendarAdmin/form"===t.pathname;return r.a.createElement("div",{className:"submit-form flex column  align-center"},g&&r.a.createElement("header",{className:"header-in-form-modal flex align-center space-between"},r.a.createElement("div",{className:"back-arrow",onClick:function(){return e.history.push("/calendarAdmin/treatments")}},r.a.createElement("i",{class:"fas fa-arrow-right"})),r.a.createElement("div",null,"\u05dc\u05e7\u05d1\u05d9\u05e2\u05ea \u05d4\u05ea\u05d5\u05e8 \u05dc\u05d7\u05e6\u05d5 '\u05d0\u05d9\u05e9\u05d5\u05e8'"),r.a.createElement("div",{className:"modal-header-cls-btn-space"})),!g&&r.a.createElement("button",{className:"reset-btn",onClick:function(){W.initApp(),e.history.push("/treatments")}}," \u05d0\u05d9\u05e4\u05d5\u05e1 ",r.a.createElement("i",{className:"fas fa-redo-alt"})),r.a.createElement("div",{className:"user-details ".concat(g?"user-details-in-modal":"")},r.a.createElement("div",null,"\u05e9\u05dd : ",v),r.a.createElement("div",null,"\u05d8\u05dc\u05e4\u05d5\u05df : ",b),E?r.a.createElement("div",null,"\u05d0\u05d9\u05de\u05d9\u05d9\u05dc : ",E):""),r.a.createElement(Ke.a.div,{initial:"out",exit:"in",animate:"in",variants:g?"":ze.getMotionStyle("pageVariants"),transition:g?"":ze.getMotionStyle("pageTransition"),style:{textAlign:"center",width:"100%"}},r.a.createElement("div",{className:"appointment-details"},r.a.createElement("div",{className:"table-cell"},"\u05e1\u05d5\u05d2 \u05d4\u05d8\u05d9\u05e4\u05d5\u05dc : ",oe.getMarkedTreatmentsStr(e.treatments)),r.a.createElement("div",{className:"table-cell"},"\u05ea\u05d0\u05e8\u05d9\u05da : ",te.convertDateToIsraelisDisplay(e.treatment.date)),r.a.createElement("div",{className:"last-cell"},"\u05d1\u05d9\u05df \u05d4\u05e9\u05e2\u05d5\u05ea : ",te.calculateEndTime(e.treatment.time,e.duration)," - ",e.treatment.time))),r.a.createElement(Bt,{modalContent:r.a.createElement("div",{className:"main-modal-in-form flex column justify-center align-center"},r.a.createElement("div",{className:"title-modal-in-form"},"\u05d4\u05ea\u05d5\u05e8 \u05e0\u05e7\u05d1\u05e2 \u05d1\u05d4\u05e6\u05dc\u05d7\u05d4"),r.a.createElement("div",{className:"form-modal-content flex column space-between"},r.a.createElement("div",{className:"margin-bottom-5"}," \u05e0\u05e7\u05d1\u05e2 \u05dc\u05da \u05ea\u05d5\u05e8 \u05dc",i,"  "),r.a.createElement("div",{className:"margin-bottom-5"}," \u05d1\u05ea\u05d0\u05e8\u05d9\u05da: ",u),r.a.createElement("div",null," \u05d1\u05d9\u05df \u05d4\u05e9\u05e2\u05d5\u05ea: ",d," - ",e.treatment.time)))}),!g&&r.a.createElement(Je,{handleOpen:function(){e.updateIsModalOpen(!0)},setAppointment:function(){return h.apply(this,arguments)}}))})));a(200);var Ht={updateActiveStep:Ze,setTimeSlots:Dt,updateIsModalOpen:Mt},qt=Object(m.h)(Object(u.b)((function(e){return{}}),Ht)((function(e){Object(n.useEffect)((function(){S()}),[]);var t=Object(m.f)(),a=r.a.useState(r.a.createElement(Qe,null)),c=Object(p.a)(a,2),i=c[0],l=c[1];setTimeout((function(){l("")}),2e3);var u=r.a.useState(e.clickedUser?e.clickedUser.phone:C.loadFromStorage("tori-user").phone),d=Object(p.a)(u,2),f=d[0],v=(d[1],Object(n.useState)(null)),b=Object(p.a)(v,2),E=b[0],h=b[1],g=Object(n.useState)(0),k=Object(p.a)(g,2),O=k[0],y=k[1],T=Object(n.useState)(0),N=Object(p.a)(T,2),j=N[0],w=N[1];function S(){ft.getEventByPhone(f).then((function(e){if(e[0]){var t=e.filter((function(e){var t=e.date.slice(0,4),a=e.date.slice(5,7),n=e.date.slice(8,10),r=+e.startTime.slice(0,2)+3;return new Date(t,a-1,n,r,0).getTime()>Date.now()}));t.length?(w(t.length),t.sort((function(e,t){return+e.date.slice(2,4)>+t.date.slice(2,4)||+e.date.slice(8,10)>+t.date.slice(8,10)||+e.date.slice(5,7)>+t.date.slice(5,7)?1:-1})),h(te.getEventReadyForDisplay(t))):h(null)}}))}function x(){return(x=Object(s.a)(o.a.mark((function t(a){var n,r;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.updateIsModalOpen(!0),t.next=3,ft.getEventByPhone(f);case 3:return n=t.sent,r=n.find((function(e){return e._id===a})),Et.removeEventFromCalendar(r),O&&y(O-1),bt.sendEmail(r.name,r.date,r.email,!1),t.next=10,ft.removeEventFromDB(r._id);case 10:S();case 11:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return r.a.createElement("div",{className:"cancel-appointment flex column align-center space-between "},r.a.createElement(Ke.a.div,{className:"motion-div",initial:"out",exit:"in",animate:"in",variants:ze.getMotionStyle("pageVariants"),transition:ze.getMotionStyle("pageTransition")},i?r.a.createElement("div",{className:"cancel-apointment-loader"},i):r.a.createElement("main",{className:"cancel-appointment-wrapper"},E?1===j?r.a.createElement("div",{className:"appointments-amount-title ".concat("/cancelAppointment"!==t.pathname?"appointments-amount-title-modal":"")},"\u05e0\u05de\u05e6\u05d0 \u05ea\u05d5\u05e8 \u05d0\u05d7\u05d3"):r.a.createElement("div",{className:"appointments-amount-title ".concat("/cancelAppointment"!==t.pathname?"appointments-amount-title-modal":"")},"\u05e0\u05de\u05e6\u05d0\u05d5 ".concat(te.convertNumberToWords(j)," \u05ea\u05d5\u05e8\u05d9\u05dd")):"",r.a.createElement("div",{className:"table-wrapper"},E?r.a.createElement("div",null,r.a.createElement("div",{className:"cancel-table-container"},r.a.createElement("div",{className:"apointment-details"},r.a.createElement("div",{className:"table-cell"}," ",r.a.createElement("span",null,"\u05e1\u05d5\u05d2 \u05d4\u05d8\u05d9\u05e4\u05d5\u05dc")," : ",E[O].treatments),r.a.createElement("div",{className:"table-cell"}," \u05d1\u05ea\u05d0\u05e8\u05d9\u05da : ",E[O].date),r.a.createElement("div",{className:"last-cell"}," \u05d1\u05d9\u05df \u05d4\u05e9\u05e2\u05d5\u05ea : ","".concat(E[O].endTime," - ").concat(E[O].startTime))))):r.a.createElement("div",{className:"no-apointments"},"\u05dc\u05d0 \u05e0\u05de\u05e6\u05d0\u05d5 \u05ea\u05d5\u05e8\u05d9\u05dd")),E&&r.a.createElement("div",{className:"cancel-appointment-btn flex align-center space-around",onClick:function(){return function(e){return x.apply(this,arguments)}(E[O].id)}},r.a.createElement("div",{className:"cancel-appointment-btn-text"},"\u05d1\u05d8\u05dc \u05ea\u05d5\u05e8 \u05d6\u05d4"),r.a.createElement("i",{className:"fas fa-ban"})),r.a.createElement("div",{className:"cancel-appointment-btns-container flex"},r.a.createElement("div",{className:"nav-btn-wrapper"},r.a.createElement("button",{className:"nav-btn ".concat(e.clickedUser?"nav-btn-right":""),disabled:!E||!O>0,onClick:function(){return y(O-1)}},r.a.createElement("i",{className:"fas fa-arrow-circle-right"}))),r.a.createElement("div",{className:"nav-btn-wrapper"},r.a.createElement("button",{className:"nav-btn ".concat(e.clickedUser?"nav-btn-left":""),disabled:!E||!(E.length>1&&O<E.length-1),onClick:function(){y(O+1),console.log(O)}},r.a.createElement("i",{className:"fas fa-arrow-circle-left"})))))),r.a.createElement(Bt,{modalContent:r.a.createElement("div",{className:"flex align-center justify-center",style:{height:"100%"}},r.a.createElement("div",null,"\u05d4\u05ea\u05d5\u05e8 \u05d1\u05d5\u05d8\u05dc, \u05ea\u05d5\u05d3\u05d4 \u05e2\u05dc \u05d4\u05e2\u05d3\u05db\u05d5\u05df."))}))}))),Wt=(a(201),a(15));function Vt(e){return r.a.createElement("main",{className:"signup-or-login-container flex align-center column"},r.a.createElement(Ke.a.div,{className:"motion-div",initial:"out",exit:"in",animate:"in",variants:ze.getMotionStyle("pageVariants"),transition:ze.getMotionStyle("pageTransition"),style:{width:"100%",height:"100%"}},r.a.createElement("div",{className:"square top-square"},r.a.createElement(Wt.b,{className:"signUp-link-in-sign-up-or-login flex align-center justify-center column",to:"/signup"},r.a.createElement("div",{className:"signup-or-login-text"},"\u05d4\u05e8\u05e9\u05de/\u05d9"),r.a.createElement("i",{class:"fas fa-user-edit"}))),r.a.createElement("div",{className:"square bottom-square"},r.a.createElement(Wt.b,{className:"login-link-in-sign-up-or-login flex align-center justify-center column",to:"/login"},r.a.createElement("div",{className:"signup-or-login-text"},"\u05d4\u05ea\u05d7\u05d1\u05e8/\u05d9"),r.a.createElement("i",{class:"fas fa-sign-in-alt"})))))}var Zt=a(264),Gt=a(268),Yt=a(274),Jt=a(263),Kt=a(262),zt=a(266),Xt=a(265);a(202);var $t={updateLoggedInUser:ye},Qt=Object(u.b)((function(e){return{loggedInUser:e.UserReducer.loggedInUser,owner:e.UserReducer.owner}}),$t)((function(e){var t=r.a.useState(""),a=Object(p.a)(t,2),c=a[0],i=a[1],l=Object(n.useState)(""),u=Object(p.a)(l,2),m=u[0],d=u[1],f=Object(n.useState)("visibility"),v=Object(p.a)(f,2),b=v[0],E=v[1],h=Object(n.useState)(!1),g=Object(p.a)(h,2),k=g[0],O=g[1];function y(e){var t=e.target,a=t.name,n=t.value;switch(a){case"phone":i(n);break;case"password":d(n);break;default:console.log("Err updating name/phone/email")}}function T(){return(T=Object(s.a)(o.a.mark((function t(){var a,n,r,i;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,I.getUser(c);case 2:(a=t.sent)?a.isAdmin?R():(n=a.name,r=a.email,i=a.phone,C.saveToStorage("tori-user",{name:n,email:r,phone:i}),e.updateLoggedInUser(a),e.history.push("/treatments")):F();case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}Object(n.useEffect)((function(){O(c.length>8&&c.length<11)}),[c]),Object(n.useEffect)((function(){c.length>8&&c.length<11&&E("visibility")}),[c]);var N=r.a.useState(!1),j=Object(p.a)(N,2),w=j[0],S=j[1],x=r.a.useState(" \u05d4\u05e8\u05e9\u05d0\u05ea \u05de\u05e0\u05d4\u05dc"),D=Object(p.a)(x,2),A=D[0],U=D[1],R=function(){S(!0)},M=function(){var t=Object(s.a)(o.a.mark((function t(a){var n,r,i,l;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,I.getUser(c);case 2:n=t.sent,"close"!==a?m===e.owner.pass?(S(!1),r=n.name,i=n.email,l=n.phone,C.saveToStorage("tori-user",{name:r,email:i,phone:l}),e.updateLoggedInUser(n),e.history.push("/calendarAdmin")):U("\u05e1\u05e1\u05de\u05d0 \u05e9\u05d2\u05d5\u05d9\u05d4!"):(S(!1),U("\u05d4\u05e8\u05e9\u05d0\u05ea \u05de\u05e0\u05d4\u05dc"));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),_=r.a.useState(!1),P=Object(p.a)(_,2),B=P[0],L=P[1],F=function(){L(!0)},H=function(){L(!1)};return r.a.createElement("main",{className:"main-login-container log-in-page flex align-center  column"},r.a.createElement(Ke.a.div,{className:"motion-div",initial:"out",exit:"in",animate:"in",variants:ze.getMotionStyle("pageVariants"),transition:ze.getMotionStyle("pageTransition"),style:{width:"100%",height:"100%"}},r.a.createElement("div",{className:"login-title"},"\u05d0\u05e0\u05d0 \u05d4\u05db\u05e0\u05d9\u05e1\u05d5 \u05de\u05e1\u05e4\u05e8 \u05d8\u05dc\u05e4\u05d5\u05df \u05dc\u05d6\u05d9\u05d4\u05d5\u05d9"),r.a.createElement("form",{className:"main-form flex align-center column"},r.a.createElement("div",{className:"input-container"},r.a.createElement("div",{className:"form-title-container flex"},r.a.createElement("div",{className:"validation-text ".concat(b)},c?"\u05de\u05e1\u05e4\u05e8 \u05d4\u05d8\u05dc\u05e4\u05d5\u05df \u05e9\u05d4\u05d5\u05e7\u05e9 \u05e9\u05d2\u05d5\u05d9":"\u05d6\u05d4\u05d5 \u05e9\u05d3\u05d4 \u05d7\u05d5\u05d1\u05d4, \u05d9\u05e9 \u05dc\u05d4\u05db\u05e0\u05d9\u05e1 \u05d8\u05dc\u05e4\u05d5\u05df")),r.a.createElement("input",{className:"phone",name:"phone",id:"outlined-basic",variant:"outlined",value:c,onChange:y})))),r.a.createElement(Yt.a,{open:w,onClose:function(){return M("close")},"aria-labelledby":"form-dialog-title"},r.a.createElement(Xt.a,{id:"form-dialog-title"}," ",A),r.a.createElement(Kt.a,null,r.a.createElement(zt.a,null,"\u05d4\u05db\u05e0\u05e1 \u05e1\u05d9\u05e1\u05de\u05d4"),r.a.createElement(Gt.a,{autoFocus:!0,margin:"dense",id:"name",label:"\u05e1\u05d9\u05e1\u05de\u05d4",type:"email",fullWidth:!0,value:m,onChange:y,name:"password"})),r.a.createElement(Jt.a,null,r.a.createElement(Zt.a,{onClick:function(){return M("close")},color:"primary"},"\u05d1\u05d8\u05dc"),r.a.createElement(Zt.a,{onClick:M,color:"primary"},"\u05d0\u05e9\u05e8"))),r.a.createElement(Yt.a,{open:B,onClose:H,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},r.a.createElement(Kt.a,null,r.a.createElement(zt.a,{id:"alert-dialog-description row"},r.a.createElement("div",null,r.a.createElement("div",null,"\u05d4\u05de\u05e1\u05e4\u05e8 \u05e9\u05d4\u05d5\u05e7\u05e9 \u05d0\u05d9\u05e0\u05d5 \u05e7\u05d9\u05d9\u05dd \u05d1\u05de\u05e2\u05e8\u05db\u05ea."),r.a.createElement("div",{className:"flex"},r.a.createElement("div",null,"\u05dc\u05d4\u05e8\u05e9\u05de\u05d4 \u05dc\u05d7\u05e5"),r.a.createElement(Wt.b,{className:"login-link flex align-center justify-center",to:"/signup"},"\u05db\u05d0\u05df"))))),r.a.createElement(Jt.a,null,r.a.createElement(Zt.a,{onClick:H,color:"primary",autoFocus:!0},"\u05d1\u05d9\u05d8\u05d5\u05dc"))),r.a.createElement("div",{className:"save-btn-wrapper",onClick:function(){E(k?"visibility":"")}}," "),r.a.createElement("button",{className:"save-btn",onClick:function(){return T.apply(this,arguments)},disabled:!k},"\u05d4\u05ea\u05d7\u05d1\u05e8"))})),ea=a(267);a(203);var ta=Object(u.b)((function(e){return{}}),{})((function(e){var t="/calendarAdmin/contacts/signup"===Object(m.f)().pathname;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"save-btn-wrapper",onClick:function(){return e.toggleValidations()}}," "),r.a.createElement("button",{className:"save-btn ".concat(t?"save-btn-in-contact-path":""),onClick:function(){return e.setUser()},disabled:!e.isValid.phone||!e.isValid.email||!e.isValid.name},"\u05e9\u05de\u05d5\u05e8"))})),aa=(a(204),r.a.forwardRef((function(e,t){return r.a.createElement(ea.a,Object.assign({direction:"up",ref:t},e))})));var na={updateUserPhoneInContactSignup:je,updateUserToSchedule:Ne,updateLoggedInUser:ye},ra=Object(u.b)((function(e){return{owner:e.UserReducer.owner}}),na)((function(e){var t=Object(m.f)(),a=r.a.useState({name:"",phone:"",email:"",workPlace:e.owner.workPlace}),c=Object(p.a)(a,2),i=c[0],l=c[1],u=i.name,f=i.phone,v=i.email,b=Object(n.useState)("visibility"),E=Object(p.a)(b,2),h=E[0],g=E[1],k=Object(n.useState)("visibility"),O=Object(p.a)(k,2),y=O[0],T=O[1],N=Object(n.useState)("visibility"),j=Object(p.a)(N,2),w=j[0],S=j[1],x=Object(n.useState)({name:!1,phone:!1,email:!0}),D=Object(p.a)(x,2),A=D[0],C=D[1];function U(e){var t=e.target,a=t.name,n=t.value;switch(a){case"name":l(Object(d.a)(Object(d.a)({},i),{},{name:n}));break;case"phone":l(Object(d.a)(Object(d.a)({},i),{},{phone:n}));break;case"email":l(Object(d.a)(Object(d.a)({},i),{},{email:n}));break;default:console.log("Err updating name/phone/email")}}function R(){e.history.push("/calendarAdmin/contacts")}Object(n.useEffect)((function(){!function(){var e=!0;v&&(e=te.validateEmail(v));C({name:u.length>0,phone:f.length>8&&f.length<11,email:e})}()}),[i]),Object(n.useEffect)((function(){u&&g("visibility")}),[u]),Object(n.useEffect)((function(){f.length>8&&f.length<11&&T("visibility")}),[f]),Object(n.useEffect)((function(){te.validateEmail(v)&&S("visibility")}),[v]);var M="/calendarAdmin/contacts/signup"===t.pathname;function _(){return(_=Object(s.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,I.getUser(f);case 2:if(!t.sent){t.next=7;break}H(),t.next=18;break;case 7:return M||e.updateLoggedInUser(i),t.next=10,I.addUser(i,M);case 10:if(M){t.next=14;break}f!==e.owner.phone?e.history.push("/treatments"):e.history.push("/calendarAdmin"),t.next=18;break;case 14:return t.next=16,e.updateUserPhoneInContactSignup(i.phone);case 16:e.updateUserToSchedule(i),R();case 18:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var P=r.a.useState(!1),B=Object(p.a)(P,2),L=B[0],F=B[1],H=function(){F(!0)},q=function(){F(!1)};return r.a.createElement("main",{className:"main-login-container flex align-center column"},r.a.createElement(Ke.a.div,{className:"motion-div",initial:"out",exit:"in",animate:"in",variants:M?"":ze.getMotionStyle("pageVariants"),transition:M?"":ze.getMotionStyle("pageTransition"),style:{width:"100%",height:"100%"}},M&&r.a.createElement("header",{className:"header-in-signup-modal"},M&&r.a.createElement("div",{className:"back-arrow",onClick:R},r.a.createElement("i",{class:"fas fa-arrow-right"}))),r.a.createElement("div",{className:"login-title ".concat(M?"login-title-display-none":"")},"\u05d0\u05e0\u05d0 \u05de\u05dc\u05d0\u05d5 \u05d0\u05ea \u05d4\u05e9\u05d3\u05d5\u05ea \u05d4\u05d1\u05d0\u05d9\u05dd \u05d5\u05dc\u05d7\u05e6\u05d5 '\u05e9\u05de\u05d5\u05e8'.",r.a.createElement("div",{className:"login-title-sub"},"\u05e9\u05d3\u05d5\u05ea \u05d4\u05de\u05e1\u05d5\u05de\u05e0\u05d9\u05dd \u05d1 - *  \u05d4\u05d9\u05e0\u05dd \u05e9\u05d3\u05d5\u05ea \u05d7\u05d5\u05d1\u05d4")),r.a.createElement("form",{className:"main-form flex align-center justify-center column ".concat(M?"main-form-in-contact-path":"")},r.a.createElement("div",{className:"input-container"},r.a.createElement("div",{className:"form-title-container flex"},r.a.createElement("div",{className:"form-title"},"* \u05e9\u05dd \u05de\u05dc\u05d0  "),r.a.createElement("div",{className:"validation-text ".concat(h)},"\u05d6\u05d4\u05d5 \u05e9\u05d3\u05d4 \u05d7\u05d5\u05d1\u05d4, \u05d9\u05e9 \u05dc\u05d4\u05db\u05e0\u05d9\u05e1 \u05e9\u05dd")),r.a.createElement("input",{maxlength:"18",autoFocus:!0,className:"name",name:"name",id:"outlined-basic",variant:"outlined",value:u,onChange:U})),r.a.createElement("div",{className:"input-container"},r.a.createElement("div",{className:"form-title-container flex"},r.a.createElement("div",{className:"form-title"},"* \u05d8\u05dc\u05e4\u05d5\u05df  "),r.a.createElement("div",{className:"validation-text ".concat(y)},f?"\u05de\u05e1\u05e4\u05e8 \u05d4\u05d8\u05dc\u05e4\u05d5\u05df \u05e9\u05d4\u05d5\u05e7\u05e9 \u05e9\u05d2\u05d5\u05d9":"\u05d6\u05d4\u05d5 \u05e9\u05d3\u05d4 \u05d7\u05d5\u05d1\u05d4, \u05d9\u05e9 \u05dc\u05d4\u05db\u05e0\u05d9\u05e1 \u05d8\u05dc\u05e4\u05d5\u05df")),r.a.createElement("input",{className:"phone",name:"phone",id:"outlined-basic",variant:"outlined",value:f,onChange:U})),r.a.createElement("div",{className:"input-container"},r.a.createElement("div",{className:"form-title-container flex"},r.a.createElement("div",{className:"form-title form-title-email"},"\u05de\u05d9\u05d9\u05dc "),r.a.createElement("div",{className:"validation-text ".concat(w)},"\u05d4\u05d0\u05d9\u05de\u05d9\u05d9\u05dc \u05e9\u05d4\u05d5\u05e7\u05e9 \u05e9\u05d2\u05d5\u05d9")),r.a.createElement("input",{className:"email",name:"email",id:"outlined-basic",variant:"outlined",value:v,onChange:U})))),r.a.createElement(Yt.a,{open:L,TransitionComponent:aa,keepMounted:!0,onClose:q,"aria-labelledby":"alert-dialog-slide-title","aria-describedby":"alert-dialog-slide-description"},r.a.createElement(Kt.a,null,r.a.createElement(zt.a,{id:"alert-dialog-slide-description"},r.a.createElement("div",null,r.a.createElement("div",null,"\u05d4\u05de\u05e1\u05e4\u05e8 \u05e9\u05d4\u05d5\u05e7\u05e9 \u05db\u05d1\u05e8 \u05e7\u05d9\u05d9\u05dd \u05d1\u05de\u05e2\u05e8\u05db\u05ea."),!M&&r.a.createElement("div",{className:"flex"},r.a.createElement("div",null,"\u05dc\u05d4\u05ea\u05d7\u05d1\u05e8\u05d5\u05ea \u05dc\u05d7\u05e5"),r.a.createElement(Wt.b,{className:"login-link flex align-center justify-center",to:"/login"},"\u05db\u05d0\u05df"))))),r.a.createElement(Jt.a,null,r.a.createElement(Zt.a,{onClick:q,color:"primary"},"\u05d1\u05d9\u05d8\u05d5\u05dc"))),r.a.createElement(ta,{toggleValidations:function(){A.name?g("visibility"):g(""),A.phone?T("visibility"):T(""),A.email?S("visibility"):S("")},setUser:function(){return _.apply(this,arguments)},isValid:A}))})),ca={getAd:function(e){return j("advertise/".concat(e))},updateAd:function(e){return S("advertise",e)},toggleAdMode:function(e){return S("advertise/mode",e)},createAd:function(e){return w("advertise/".concat(e))}};a(205);var ia={updateIsAdShown:function(e){return function(t){t(function(e){return{type:"UPDATE_IS_AD_SHOWN",isAdShown:e}}(e))}},updateIsModalOpen:Mt,setOwner:function(e){return function(){var t=Object(s.a)(o.a.mark((function t(a){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{a(Oe(e))}catch(n){console.log("userActions: err in setting owner",n)}case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}},la=Object(u.b)((function(e){return{isAdShown:e.UserReducer.isAdShown,loggedInUser:e.UserReducer.loggedInUser,owner:e.UserReducer.owner}}),ia)((function(e){function t(t){e.loggedInUser?e.history.push(t):e.history.push("/signupOrLogin")}var a,c=Object(n.useState)(),i=Object(p.a)(c,2),l=i[0],u=i[1],d=Object(m.g)().workPlace;return Object(n.useEffect)((function(){Object(s.a)(o.a.mark((function t(){var n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log("workPlace",d),e.owner){t.next=13;break}return t.next=4,I.getOwner(d);case 4:return n=t.sent,console.log("owner",n),e.setOwner(n),document.body.style.backgroundImage="url(".concat(n.mainBgImgUrl,")"),t.next=10,ca.getAd(n.workPlace);case 10:a=t.sent,t.next=16;break;case 13:return t.next=15,ca.getAd(e.owner.workPlace);case 15:a=t.sent;case 16:if(a=a[0],!e.loggedInUser||e.loggedInUser.isAdmin){t.next=21;break}a&&a.content&&a.isAdModeOn&&(e.isAdShown||(u(a.content),e.updateIsModalOpen(!0),e.updateIsAdShown(!0))),t.next=26;break;case 21:if(!a){t.next=25;break}return t.abrupt("return");case 25:ca.createAd(e.owner.workPlace);case 26:case"end":return t.stop()}}),t)})))()}),[e.loggedInUser]),e.owner&&r.a.createElement("div",{className:"home-page-wrapper",style:{backgroundImage:"url(".concat(e.owner.homePageBgImgUrl,")")}},r.a.createElement("main",{className:"home-page"},r.a.createElement("img",{className:"cover-photo",src:"".concat(e.owner.coverImgUrl)}),e.loggedInUser?r.a.createElement("div",{className:"login-container",onClick:function(){return e.history.push("/editUser")}},r.a.createElement("div",{className:"admin-logo"}," ",r.a.createElement("i",{className:"fas fa-user-tie"})),r.a.createElement("div",null,e.loggedInUser.name)):r.a.createElement("div",{className:"login-container",onClick:function(){return e.history.push("/signupOrLogin")}},r.a.createElement("div",{className:"user-logo"},"  ",r.a.createElement("i",{className:"fas fa-user-tie"})),r.a.createElement("div",null,"\u05d4\u05e8\u05e9\u05dd/"),r.a.createElement("div",null,"\u05d4\u05ea\u05d7\u05d1\u05e8")),r.a.createElement("div",{className:"profile-container"},r.a.createElement("div",{className:"profile-img",style:{backgroundImage:"url(".concat(e.owner.profileImgUrl,")")}}),r.a.createElement("div",{className:"profile-text-container"},r.a.createElement("div",{id:"profile-title",className:"profile-title"},e.owner.workPlaceTitle),r.a.createElement("div",{className:"profile-sub-title"},e.owner.workPlaceSubTitle))),r.a.createElement("div",{className:"icons-container flex column align-center justify-center"},e.loggedInUser&&!e.loggedInUser.isAdmin?r.a.createElement("div",{className:"bottom-icons-container flex space-around"},r.a.createElement("div",{className:"queue-container",onClick:function(){return t("/treatments")}},r.a.createElement("div",{className:"circle"},r.a.createElement("i",{class:"fas fa-user-clock"})),"\u05e7\u05d1\u05d9\u05e2\u05ea \u05ea\u05d5\u05e8"),r.a.createElement("div",{className:"remove-queue-container",onClick:function(){return t("/cancelAppointment")}},r.a.createElement("div",{className:"circle"},r.a.createElement("i",{class:"fas fa-user-times"})),"\u05d1\u05d9\u05d8\u05d5\u05dc \u05ea\u05d5\u05e8"),r.a.createElement("a",{className:"phone",href:"tel:0538281511"},r.a.createElement("div",{className:"circle"},r.a.createElement("i",{className:"fas fa-phone-alt"})),"\u05d7\u05d9\u05d9\u05d2\u05d5 \u05d0\u05dc\u05d9\u05e0\u05d5")):e.loggedInUser?r.a.createElement("div",{className:"bottom-icons-container flex space-around"},r.a.createElement("div",{className:"queue-container",onClick:function(){return t("/calendarAdmin")}},r.a.createElement("div",{className:"circle"},r.a.createElement("i",{class:"far fa-calendar-alt"})),"\u05d9\u05d5\u05de\u05df"),r.a.createElement("div",{className:"remove-queue-container",onClick:function(){return t("/adminContacts")}},r.a.createElement("div",{className:"circle"},r.a.createElement("i",{class:"fas fa-users"})," "),"\u05dc\u05e7\u05d5\u05d7\u05d5\u05ea"),r.a.createElement("div",{className:"remove-queue-container",onClick:function(){return t("/advertise")}},r.a.createElement("div",{className:"circle"},r.a.createElement("i",{class:"far fa-comment-alt"})),"\u05e4\u05e8\u05e1\u05d5\u05de\u05d9\u05dd")):r.a.createElement("div",{className:"bottom-icons-container flex space-around"},r.a.createElement("div",{className:"queue-container",onClick:function(){return t("/treatments")}},r.a.createElement("div",{className:"circle"},r.a.createElement("i",{class:"fas fa-user-clock"})),"\u05e7\u05d1\u05d9\u05e2\u05ea \u05ea\u05d5\u05e8"),r.a.createElement("div",{className:"remove-queue-container",onClick:function(){return t("/cancelAppointment")}},r.a.createElement("div",{className:"circle"},r.a.createElement("i",{class:"fas fa-user-times"})),"\u05d1\u05d9\u05d8\u05d5\u05dc \u05ea\u05d5\u05e8"),r.a.createElement("a",{className:"phone",href:"tel:0538281511"},r.a.createElement("div",{className:"circle"},r.a.createElement("i",{className:"fas fa-phone-alt"})),"\u05d7\u05d9\u05d9\u05d2\u05d5 \u05d0\u05dc\u05d9\u05e0\u05d5")),r.a.createElement("div",{className:"top-icons-container flex space-around"},r.a.createElement("a",{className:"facebook-container",href:"https://www.facebook.com/".concat(e.owner?e.owner.facebook:"","/")},r.a.createElement("div",{className:"circle"},r.a.createElement("i",{class:"fab fa-facebook-f"})," "),"\u05e4\u05d9\u05d9\u05e1\u05d1\u05d5\u05e7"),r.a.createElement("a",{className:"instagram-container",href:"https://www.instagram.com/".concat(e.owner?e.owner.instagram:"","/")},r.a.createElement("div",{className:"circle"},r.a.createElement("i",{class:"fab fa-instagram"})),"\u05d0\u05d9\u05e0\u05e1\u05d8\u05d2\u05e8\u05dd"),r.a.createElement("a",{className:"waze-container",href:e.owner?e.owner.wazeUrl:""},r.a.createElement("div",{className:"circle"}," ",r.a.createElement("i",{className:"fab fa-waze"})),"\u05e0\u05d5\u05d5\u05d8\u05d5 \u05d0\u05dc\u05d9\u05e0\u05d5"))),r.a.createElement(Bt,{modalContent:l})))}));a(206);var oa={updateLoggedInUser:ye},sa=Object(u.b)((function(e){return{loggedInUser:e.UserReducer.loggedInUser,owner:e.UserReducer.owner}}),oa)((function(e){var t=r.a.useState(e.loggedInUser),a=Object(p.a)(t,2),c=a[0],i=a[1],l=c.name,u=c.phone,m=c.email,f=Object(n.useState)(""),v=Object(p.a)(f,2),b=v[0],E=v[1],h=Object(n.useState)("visibility"),g=Object(p.a)(h,2),k=g[0],O=g[1],y=Object(n.useState)("visibility"),T=Object(p.a)(y,2),N=T[0],j=T[1],w=Object(n.useState)("visibility"),S=Object(p.a)(w,2),x=S[0],D=S[1],A=Object(n.useState)({name:!1,phone:!1,email:!0}),U=Object(p.a)(A,2),R=U[0],M=U[1];function _(e){var t=e.target,a=t.name,n=t.value;switch(a){case"name":i(Object(d.a)(Object(d.a)({},c),{},{name:n}));break;case"phone":i(Object(d.a)(Object(d.a)({},c),{},{phone:n}));break;case"email":i(Object(d.a)(Object(d.a)({},c),{},{email:n}));break;case"password":E(n);break;default:console.log("Err updating name/phone/email")}}function P(){return(P=Object(s.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.loggedInUser.isAdmin?G():(I.updateUser(c),e.history.push("/".concat(e.owner.workPlace)));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}Object(n.useEffect)((function(){!function(){var e=!0;m&&(e=te.validateEmail(m));M({name:l.length>0,phone:u.length>8&&u.length<11,email:e})}()}),[c]),Object(n.useEffect)((function(){l&&O("visibility")}),[l]),Object(n.useEffect)((function(){u.length>8&&u.length<11&&j("visibility")}),[u]),Object(n.useEffect)((function(){te.validateEmail(m)&&D("visibility")}),[m]);var B=r.a.useState(!1),L=Object(p.a)(B,2),F=L[0],H=L[1],q=r.a.useState(" \u05d4\u05e8\u05e9\u05d0\u05ea \u05de\u05e0\u05d4\u05dc"),W=Object(p.a)(q,2),V=W[0],Z=W[1],G=function(){H(!0)},Y=function(t){"close"!==t?b===e.owner.pass?(H(!1),I.updateUser(c),e.history.push("/".concat(e.owner.workPlace))):Z("\u05e1\u05e1\u05de\u05d0 \u05e9\u05d2\u05d5\u05d9\u05d4!"):(H(!1),Z("\u05d4\u05e8\u05e9\u05d0\u05ea \u05de\u05e0\u05d4\u05dc"))},J=Object(n.useState)(!1),K=Object(p.a)(J,2),z=K[0],X=K[1],$=Object(n.useState)(!0),Q=Object(p.a)($,2),ee=Q[0],ae=Q[1],ne=Object(n.useState)("thin-border-bottom"),re=Object(p.a)(ne,2),ce=re[0],ie=re[1],le=Object(n.useRef)(null);Object(n.useEffect)((function(){z&&(me(!1),ve(!0),ge("thin-border-bottom"),Ne(!1),xe(!0),Ie("thin-border-bottom"),le.current.focus())}),[z]);var oe=Object(n.useState)(!1),se=Object(p.a)(oe,2),ue=se[0],me=se[1],de=Object(n.useState)(!0),pe=Object(p.a)(de,2),fe=pe[0],ve=pe[1],be=Object(n.useState)("thin-border-bottom"),Ee=Object(p.a)(be,2),he=Ee[0],ge=Ee[1],ke=Object(n.useRef)(null);Object(n.useEffect)((function(){ue&&(X(!1),ae(!0),ie("thin-border-bottom"),Ne(!1),xe(!0),Ie("thin-border-bottom"),ke.current.focus())}),[ue]);var Oe=Object(n.useState)(!1),ye=Object(p.a)(Oe,2),Te=ye[0],Ne=ye[1],je=Object(n.useState)(!0),we=Object(p.a)(je,2),Se=we[0],xe=we[1],De=Object(n.useState)("thin-border-bottom"),Ae=Object(p.a)(De,2),Ce=Ae[0],Ie=Ae[1],Ue=Object(n.useRef)(null);Object(n.useEffect)((function(){Te&&(me(!1),ve(!0),ge("thin-border-bottom"),X(!1),ae(!0),ie("thin-border-bottom"),Ue.current.focus())}),[Te]);var Re=function(e){"name"===e&&(X(!z),ae(!ee),ie("thick-border-bottom"===ce?"thin-border-bottom":"thick-border-bottom")),"phone"===e&&(me(!ue),ve(!fe),ge("thick-border-bottom"===he?"thin-border-bottom":"thick-border-bottom")),"email"===e&&(Ne(!Te),xe(!Se),Ie("thick-border-bottom"===Ce?"thin-border-bottom":"thick-border-bottom"))};return r.a.createElement("main",{className:"main-edit-container flex column  align-center"},r.a.createElement(Ke.a.div,{initial:"out",exit:"in",animate:"in",variants:ze.getMotionStyle("pageVariantsWithTextAlign"),transition:ze.getMotionStyle("pageTransition"),style:{width:"100%",height:"100%"}},r.a.createElement("div",{className:"sign-out flex align-center justify-center space-between",onClick:function(){C.removeFromStorage("tori-user"),e.updateLoggedInUser(null),e.history.push("/".concat(e.owner.workPlace))}},r.a.createElement("i",{class:"fas fa-sign-out-alt"}),r.a.createElement("div",null,"\u05d4\u05ea\u05e0\u05ea\u05e7")),r.a.createElement("div",{className:"login-title"},"\u05dc\u05e9\u05d9\u05e0\u05d5\u05d9 \u05dc\u05d7\u05e6\u05d5 \u05e2\u05dc \u05e1\u05de\u05dc \u05d4\u05e2\u05e8\u05d9\u05db\u05d4 \u05d5\u05dc\u05d7\u05e6\u05d5 '\u05e9\u05de\u05d5\u05e8'.",r.a.createElement("div",{className:"login-title-sub"},"\u05e9\u05d3\u05d5\u05ea \u05d4\u05de\u05e1\u05d5\u05de\u05e0\u05d9\u05dd \u05d1 - *  \u05d4\u05d9\u05e0\u05dd \u05e9\u05d3\u05d5\u05ea \u05d7\u05d5\u05d1\u05d4")),r.a.createElement("form",{className:"main-form flex align-center justify-center column"},r.a.createElement("div",{className:"input-container"},r.a.createElement("div",{className:"form-title-container flex"},r.a.createElement("div",{className:"form-title"},"* \u05e9\u05dd \u05de\u05dc\u05d0  "),r.a.createElement("div",{className:"validation-text ".concat(k)},"\u05d6\u05d4\u05d5 \u05e9\u05d3\u05d4 \u05d7\u05d5\u05d1\u05d4, \u05d9\u05e9 \u05dc\u05d4\u05db\u05e0\u05d9\u05e1 \u05e9\u05dd")),r.a.createElement("div",{className:"input-edit-container ".concat(ce," flex justify-center align-center")},r.a.createElement("input",{className:"input-edit-page name",disabled:ee,ref:le,name:"name",id:"outlined-basic",variant:"outlined",value:l,onChange:_}),z?r.a.createElement("i",{className:"edit-logo fas fa-edit",onClick:function(){return Re("name")}}):r.a.createElement("i",{className:"edit-logo far fa-edit",onClick:function(){return Re("name")}}))),r.a.createElement("div",{className:"input-container"},r.a.createElement("div",{className:"form-title-container flex"},r.a.createElement("div",{className:"form-title"},"* \u05d8\u05dc\u05e4\u05d5\u05df  "),r.a.createElement("div",{className:"validation-text ".concat(N)},u?"\u05de\u05e1\u05e4\u05e8 \u05d4\u05d8\u05dc\u05e4\u05d5\u05df \u05e9\u05d4\u05d5\u05e7\u05e9 \u05e9\u05d2\u05d5\u05d9":"\u05d6\u05d4\u05d5 \u05e9\u05d3\u05d4 \u05d7\u05d5\u05d1\u05d4, \u05d9\u05e9 \u05dc\u05d4\u05db\u05e0\u05d9\u05e1 \u05d8\u05dc\u05e4\u05d5\u05df")),r.a.createElement("div",{className:"input-edit-container ".concat(he," flex justify-center align-center")},r.a.createElement("input",{className:"input-edit-page phone",disabled:fe,ref:ke,name:"phone",id:"outlined-basic",variant:"outlined",value:u,onChange:_}),ue?r.a.createElement("i",{className:"edit-logo fas fa-edit",onClick:function(){return Re("phone")}}):r.a.createElement("i",{className:"edit-logo far fa-edit",onClick:function(){return Re("phone")}}))),r.a.createElement("div",{className:"input-container"},r.a.createElement("div",{className:"form-title-container flex"},r.a.createElement("div",{className:"form-title form-title-email"},"\u05de\u05d9\u05d9\u05dc "),r.a.createElement("div",{className:"validation-text ".concat(x)},"\u05d4\u05d0\u05d9\u05de\u05d9\u05d9\u05dc \u05e9\u05d4\u05d5\u05e7\u05e9 \u05e9\u05d2\u05d5\u05d9")),r.a.createElement("div",{className:"input-edit-container ".concat(Ce," flex justify-center align-center")},r.a.createElement("input",{className:"input-edit-page email",disabled:Se,ref:Ue,name:"email",id:"outlined-basic",variant:"outlined",value:m,onChange:_}),Te?r.a.createElement("i",{className:"edit-logo fas fa-edit",onClick:function(){return Re("email")}}):r.a.createElement("i",{className:"edit-logo far fa-edit",onClick:function(){return Re("email")}}))))),r.a.createElement(Yt.a,{open:F,onClose:function(){return Y("close")},"aria-labelledby":"form-dialog-title"},r.a.createElement(Xt.a,{id:"form-dialog-title"}," ",V),r.a.createElement(Kt.a,null,r.a.createElement(zt.a,null,"\u05d4\u05db\u05e0\u05e1 \u05e1\u05d9\u05e1\u05de\u05d4"),r.a.createElement(Gt.a,{autoFocus:!0,margin:"dense",id:"name",label:"\u05e1\u05d9\u05e1\u05de\u05d4",type:"email",fullWidth:!0,value:b,onChange:_,name:"password"})),r.a.createElement(Jt.a,null,r.a.createElement(Zt.a,{onClick:function(){return Y("close")},color:"primary"},"\u05d1\u05d8\u05dc"),r.a.createElement(Zt.a,{onClick:Y,color:"primary"},"\u05d0\u05e9\u05e8"))),r.a.createElement(ta,{toggleValidations:function(){R.name?O("visibility"):O(""),R.phone?j("visibility"):j(""),R.email?D("visibility"):D("")},setUser:function(){return P.apply(this,arguments)},isValid:R}))}));a(207);var ua={updateIsModalOpen:Mt},ma=Object(u.b)((function(e){return{owner:e.UserReducer.owner}}),ua)((function(e){var t=Object(n.useState)(""),a=Object(p.a)(t,2),c=a[0],i=a[1],l=Object(n.useState)(""),u=Object(p.a)(l,2),m=u[0],d=u[1];function f(){ca.toggleAdMode({isAdModeOn:!m}),d(!m)}return Object(n.useEffect)((function(){Object(s.a)(o.a.mark((function t(){var a;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ca.getAd(e.owner.workPlace);case 2:a=t.sent,d(a[0].isAdModeOn),i(a[0].content);case 5:case"end":return t.stop()}}),t)})))()}),[]),r.a.createElement("main",{className:"main-ad-container"},r.a.createElement("div",{className:"ad-title"},"\u05e2\u05e8\u05db\u05d5 \u05d0\u05ea \u05d4\u05de\u05d5\u05d3\u05e2\u05d4 \u05d5\u05dc\u05d7\u05e6\u05d5 '\u05e9\u05de\u05d5\u05e8 \u05d8\u05e7\u05e1\u05d8'"),m?r.a.createElement("div",{className:"ad-title ad-sub-title"},"\u05dc\u05e2\u05e6\u05d9\u05e8\u05ea \u05d4\u05e4\u05e8\u05e1\u05d5\u05dd \u05dc\u05d7\u05e6\u05d5 '\u05d4\u05e4\u05e1\u05e7 \u05e4\u05e8\u05e1\u05d5\u05dd'"):r.a.createElement("div",{className:"ad-title ad-sub-title"},"\u05dc\u05d7\u05e6\u05d5 '\u05d4\u05de\u05e9\u05da \u05e4\u05e8\u05e1\u05d5\u05dd' \u05db\u05d3\u05d9 \u05dc\u05d4\u05e4\u05e2\u05d9\u05dc\u05d4"),r.a.createElement("div",{className:"textarea-container"},r.a.createElement("textarea",{className:"ad-textarea",cols:"30",rows:"10",value:c,onChange:function(e){var t=e.target;i(t.value)}}),r.a.createElement("div",{className:"ad-btn-container flex column"},m?r.a.createElement("button",{className:"ad-btn stop-ad-btn",onClick:f}," \u05d4\u05e4\u05e1\u05e7 \u05e4\u05e8\u05e1\u05d5\u05dd"):r.a.createElement("button",{className:"ad-btn run-ad-btn",onClick:f}," \u05d4\u05de\u05e9\u05da \u05e4\u05e8\u05e1\u05d5\u05dd"))),r.a.createElement("button",{className:"ad-content-btn",onClick:function(){ca.updateAd({advertiseContent:c,workPlace:e.owner.workPlace}),e.updateIsModalOpen(!0)}},"\u05e9\u05de\u05d5\u05e8 \u05d8\u05e7\u05e1\u05d8"),r.a.createElement(Bt,{modalContent:r.a.createElement("div",{className:"flex align-center justify-center",style:{height:"100%"}},r.a.createElement("div",null,"\u05d4\u05d8\u05e7\u05e1\u05d8 \u05e0\u05e9\u05de\u05e8"))}))}));a(208);var da={loadUsers:Ee,updateUsers:ge,updateUserToSchedule:Ne},pa=Object(u.b)((function(e){return{users:e.UserReducer.users,loggedInUser:e.UserReducer.loggedInUser,owner:e.UserReducer.owner}}),da)((function(e){var t=Object(n.useState)(""),a=Object(p.a)(t,2),c=a[0],i=a[1],l=Object(n.useState)(""),o=Object(p.a)(l,2),s=o[0],u=o[1],m=Object(n.useState)(!1),d=Object(p.a)(m,2),f=d[0],v=d[1];return Object(n.useEffect)((function(){e.loadUsers(e.owner.workPlace)}),[e.loadUsers]),r.a.createElement("main",{className:"admin-contacts"},f&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"modal-screen",onClick:function(){v(!1)}}),r.a.createElement("div",{className:"apointments-modal"},r.a.createElement("header",{className:"header-admin-contacts-modal"},r.a.createElement("div",{className:"space-div-for-flex"}),r.a.createElement("div",{className:"admin-contacts-title-in-modal"},"\u05d4\u05ea\u05d5\u05e8\u05d9\u05dd \u05e9\u05dc ",s.name),r.a.createElement("div",{className:"modal-header-cls-btn-space"})),r.a.createElement(qt,{clickedUser:s}))),r.a.createElement("div",{className:"search-input-wrapper flex align-center"},r.a.createElement("input",{className:"search-input-admin-contacts",placeholder:"\u05d7\u05e4\u05e9\u05d5 \u05dc\u05e4\u05d9 \u05e9\u05dd \u05d0\u05d5 \u05d8\u05dc\u05e4\u05d5\u05df",name:"term",value:c,onChange:function(e){var t=e.target,a=t.name,n=t.value;switch(a){case"term":i(n);break;default:console.log("Err updating name/phone/email")}}}),r.a.createElement("i",{className:"fas fa-search"}),r.a.createElement("div",{onClick:function(){return e.history.push("/".concat(e.owner.workPlace))},id:"text",className:"logo"}," Tori",r.a.createElement("i",{className:"fas fa-tasks"}))),r.a.createElement("div",{className:"admin-contacts-modal-title"},"\u05e0\u05d9\u05ea\u05df \u05dc\u05d4\u05ea\u05e7\u05e9\u05e8, \u05dc\u05e9\u05dc\u05d5\u05d7 \u05d5\u05d5\u05e6\u05d0\u05e4, \u05dc\u05e8\u05d0\u05d5\u05ea \u05ea\u05d5\u05e8\u05d9\u05dd \u05e9\u05e0\u05e7\u05d1\u05e2\u05d5",r.a.createElement("div",null,"  \u05d5\u05d0\u05e3 \u05dc\u05de\u05d7\u05d5\u05e7 \u05d0\u05d5\u05ea\u05dd, \u05e2\u05f4\u05d9 \u05dc\u05d7\u05d9\u05e6\u05d4 \u05e2\u05dc \u05d4\u05d0\u05d9\u05d9\u05e7\u05d5\u05df \u05d4\u05de\u05ea\u05d0\u05d9\u05dd.")),r.a.createElement("div",{className:"contacts-users-container-warpper"},r.a.createElement("div",{className:"contacts-users-container"},e.users&&e.users.map((function(e,t){return(e.name.includes(c)||e.phone.includes(c))&&!e.isAdmin&&r.a.createElement("div",{className:"user-container flex align-center justify-center",key:t},r.a.createElement("div",{className:"user-name user-attr"},e.name),r.a.createElement("div",{className:"user-icons-container flex "},r.a.createElement("div",{className:"user-que user-attr",onClick:function(){return function(e){u(e),v(!0)}(e)}},r.a.createElement("i",{class:"far fa-calendar-check"})),r.a.createElement("a",{className:"user-whatsapp user-attr",href:"https://api.whatsapp.com/send?phone=+972".concat(e.phone.slice(1,e.phone.length))},r.a.createElement("div",null,r.a.createElement("i",{class:"fa fa-whatsapp"}))),r.a.createElement("a",{className:"user-phone user-attr",href:"tel:".concat(e.phone)},r.a.createElement("div",null,r.a.createElement("i",{class:"fas fa-phone-alt"})))))})))))}));a(209);var fa={loadUsers:Ee,updateUsers:ge,updateUserToSchedule:Ne,updateUserPhoneInContactSignup:je},va=Object(u.b)((function(e){return{users:e.UserReducer.users,userPhoneInContactSignup:e.UserReducer.userPhoneInContactSignup,owner:e.UserReducer.owner}}),fa)((function(e){var t=r.a.useState(""),a=Object(p.a)(t,2),c=a[0],i=a[1];return Object(n.useEffect)((function(){e.loadUsers(e.owner.workPlace)}),[e.loadUsers]),r.a.createElement("main",{className:"contacts-main-container"},r.a.createElement("div",{className:"search-input-container flex align-center"},r.a.createElement("div",{className:"back-arrow",onClick:function(){return e.history.push("/calendarAdmin/appointmentOrBlock")}},r.a.createElement("i",{class:"fas fa-arrow-right"})),r.a.createElement("div",{className:"search-wrapper flex align-center"},r.a.createElement("input",{className:"search-input",placeholder:"\u05d7\u05e4\u05e9 \u05dc\u05e4\u05d9 \u05e9\u05dd \u05d0\u05d5 \u05d8\u05dc\u05e4\u05d5\u05df",name:"term",value:c,onChange:function(e){var t=e.target,a=t.name,n=t.value;switch(a){case"term":i(n);break;default:console.log("Err updating name/phone/email")}}}),r.a.createElement("i",{className:"fas fa-search"})),r.a.createElement("div",{className:"modal-header-cls-btn-space"})),r.a.createElement("div",{className:"users-container-warpper"},r.a.createElement("div",{className:"users-container"},r.a.createElement("div",{className:"user-container  flex align-center justify-center",onClick:function(){e.history.push("/calendarAdmin/contacts/signup")}},r.a.createElement("div",{className:"check-mark-container"}),r.a.createElement("div",{className:"user-name user-attr"},"\u05dc\u05e7\u05d5\u05d7 \u05d7\u05d3\u05e9"),r.a.createElement("div",{className:"user-icon user-attr"}," ",r.a.createElement("i",{class:"fas fa-user-plus"}))),e.users&&e.users.map((function(t,a){return(t.name.includes(c)||t.phone.includes(c))&&!t.isAdmin&&r.a.createElement("div",{className:"user-container ".concat(t.isMarked?"user-clicked":""," flex align-center justify-center"),onClick:function(){return function(t){var a=e.users.slice();a=t.isMarked?a.map((function(t){return t.isMarked=!1,e.updateUserToSchedule(null),t})):a.map((function(a){return a._id===t._id?(a.isMarked=!0,e.updateUserToSchedule(a),a):(a.isMarked=!1,a)})),e.updateUsers(a)}(t)},key:a},r.a.createElement("div",{className:"check-mark-container flex align-center"},t.isMarked&&r.a.createElement("i",{class:"fas fa-check"})),r.a.createElement("div",{className:"user-name user-attr"},t.name),r.a.createElement("div",{className:"user-phone user-attr"},t.phone))})))))}));a(210);var ba=Object(u.b)((function(e){return{}}),{})((function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("main",{className:"main-appointment-or-block-container flex justify-center align-center column"},r.a.createElement("header",{className:"header-in-apointment-or-block-modal"},r.a.createElement("div",{className:"space-div-for-flex"}),r.a.createElement("div",{className:"appointment-or-block-title-modal"},"\u05d1\u05d7\u05e8\u05d5 \u05d1\u05e4\u05e2\u05d5\u05dc\u05d4 \u05d4\u05e8\u05e6\u05d5\u05d9\u05d4"),r.a.createElement("div",{className:"modal-header-cls-btn-space"})),r.a.createElement("div",{className:"routes-btn-container flex column space-around"},r.a.createElement("div",{className:"contacts-route-btn flex justify-center align-center column",onClick:function(){return e.history.push("/calendarAdmin/contacts")}},r.a.createElement("div",{className:"app-or-block-title"},"\u05e7\u05d1\u05d9\u05e2\u05ea \u05ea\u05d5\u05e8 \u05dc\u05dc\u05e7\u05d5\u05d7"),r.a.createElement("i",{className:"app-icon fas fa-user-clock"})),r.a.createElement("div",{className:"block-route-btn flex justify-center align-center column",onClick:function(){return e.history.push("/calendarAdmin/blockHours")}},r.a.createElement("div",{className:"app-or-block-title"},"\u05e1\u05d2\u05d9\u05e8\u05ea \u05d7\u05dc\u05d5\u05e0\u05d5\u05ea \u05d6\u05de\u05e0\u05d9\u05dd"),r.a.createElement("i",{class:"fas fa-ban"}))),r.a.createElement("footer",{className:"footer-in-apointment-or-block-modal"})))}));a(211);var Ea={updateRecurrence:function(e){return function(t){t(function(e){return{type:"UPDATE_RECURRENCE",recurrence:e}}(e))}}},ha=Object(u.b)((function(e){return{recurrence:e.CalendarReducer.recurrence,userToSchedule:e.UserReducer.userToSchedule}}),Ea)((function(e){function t(t){t=t.target.value;var a=Object(d.a)({},e.recurrence);a.isRecurrence=!0,t.length>2?a.freq=t:a.count=t,e.updateRecurrence(a)}return r.a.createElement(r.a.Fragment,null,r.a.createElement("main",{className:"appointment-freq flex justify-center align-center column"},r.a.createElement("header",{className:"header-in-appointment-freq-modal"},r.a.createElement("div",{className:"back-arrow",onClick:function(){return e.history.push("/calendarAdmin/blockHours")}},r.a.createElement("i",{class:"fas fa-arrow-right"})),r.a.createElement("div",{className:"appointment-freq-title-modal"},"\u05e7\u05d1\u05e2\u05d5 \u05d0\u05ea \u05ea\u05d3\u05d9\u05e8\u05d5\u05ea \u05d4\u05e1\u05d2\u05d9\u05e8\u05d4"),r.a.createElement("div",{className:"modal-header-cls-btn-space"})),r.a.createElement("div",{className:"appointment-freq-main-contianer"},r.a.createElement("div",{className:"appointment-freq-exmple-container"},r.a.createElement("br",null),r.a.createElement("div",{className:""},"\u05d1\u05d7\u05e8\u05d5 \u05d0\u05ea \u05de\u05e1\u05e4\u05e8 \u05d4\u05e1\u05d2\u05d9\u05e8\u05d5\u05ea,"),r.a.createElement("div",{className:""},"\u05d5\u05d0\u05d7\u05ea \u05dc\u05db\u05de\u05d4 \u05d6\u05de\u05df \u05ea\u05d5\u05e4\u05d9\u05e2 \u05d4\u05e1\u05d2\u05d9\u05e8\u05d4."),r.a.createElement("br",null),r.a.createElement("div",null,"\u05dc\u05d3\u05d5\u05d2\u05de\u05d0: "),r.a.createElement("br",null),r.a.createElement("div",null,"\u05e0\u05e0\u05d9\u05d7 \u05e9\u05de\u05e1\u05e4\u05e8 \u05d4\u05e1\u05d2\u05d9\u05e8\u05d5\u05ea \u05d4\u05d5\u05d0 \u05e9\u05ea\u05d9\u05d9\u05dd,"),r.a.createElement("div",null,"\u05d5\u05d1\u05d7\u05e8\u05ea\u05dd \u05e1\u05d2\u05d9\u05e8\u05d5\u05ea \u05e2\u05dc \u05d1\u05e1\u05d9\u05e1 \u05e9\u05d1\u05d5\u05e2\u05d9."),r.a.createElement("br",null),r.a.createElement("div",null,"\u05d9\u05e7\u05d1\u05e2\u05d5 \u05e9\u05ea\u05d9 \u05e1\u05d2\u05d9\u05e8\u05d5\u05ea!"),r.a.createElement("br",null),r.a.createElement("div",null," \u05d4\u05e8\u05d0\u05e9\u05d5\u05e0\u05d4 \u05d1\u05d9\u05d5\u05dd \u05d4\u05e0\u05d1\u05d7\u05e8,"),r.a.createElement("div",null,"\u05d5\u05d4\u05e9\u05e0\u05d9\u05d9\u05d4 \u05d1\u05d3\u05d9\u05d5\u05e7 \u05e9\u05d1\u05d5\u05e2 \u05dc\u05d0\u05d7\u05e8 \u05de\u05db\u05df."),r.a.createElement("br",null),r.a.createElement("div",{className:"one-time-appointment"},"\u05dc\u05e1\u05d2\u05d9\u05e8\u05d4 \u05e8\u05d2\u05d9\u05dc\u05d4 \u05d5\u05d7\u05d3 \u05e4\u05e2\u05de\u05d9\u05ea."),r.a.createElement("div",{className:"one-time-appointment"},"\u05d0\u05d9\u05df \u05e6\u05d5\u05e8\u05da \u05dc\u05d1\u05d7\u05d5\u05e8, \u05e4\u05e9\u05d5\u05d8 \u05dc\u05d7\u05e6\u05d5 \u05d0\u05d9\u05e9\u05d5\u05e8."),r.a.createElement("br",null)),r.a.createElement("div",{className:"appointment-freq-selects-wrapper"},r.a.createElement("div",{className:"count-container flex space-between"},r.a.createElement("div",{className:"count-title",for:"count"},"\u05de\u05e1\u05e4\u05e8 \u05d4\u05d7\u05d6\u05e8\u05d5\u05ea \u05d4\u05e8\u05e6\u05d5\u05d9:"),r.a.createElement("select",{className:"count-select",id:"count",name:"count",onChange:t},r.a.createElement("option",{value:1,selected:"1"===e.recurrence.count},"\u05d0\u05d7\u05ea"),r.a.createElement("option",{value:2,selected:"2"===e.recurrence.count},"\u05e9\u05ea\u05d9\u05d9\u05dd"),r.a.createElement("option",{value:3,selected:"3"===e.recurrence.count},"\u05e9\u05dc\u05d5\u05e9"),r.a.createElement("option",{value:4,selected:"4"===e.recurrence.count},"\u05d0\u05e8\u05d1\u05e2"),r.a.createElement("option",{value:5,selected:"5"===e.recurrence.count},"\u05d7\u05de\u05e9"),r.a.createElement("option",{value:6,selected:"6"===e.recurrence.count},"\u05e9\u05e9"),r.a.createElement("option",{value:7,selected:"7"===e.recurrence.count},"\u05e9\u05d1\u05e2"),r.a.createElement("option",{value:8,selected:"8"===e.recurrence.count},"\u05e9\u05de\u05d5\u05e0\u05d4"),r.a.createElement("option",{value:9,selected:"9"===e.recurrence.count},"\u05ea\u05e9\u05e2"),r.a.createElement("option",{value:10,selected:"10"===e.recurrence.count},"\u05e2\u05e9\u05e8"),r.a.createElement("option",{value:11,selected:"11"===e.recurrence.count},"\u05d0\u05d7\u05ea-\u05e2\u05e9\u05e8\u05d4"),r.a.createElement("option",{value:12,selected:"12"===e.recurrence.count},"\u05e9\u05ea\u05d9\u05d9\u05dd-\u05e2\u05e9\u05e8\u05d4"),r.a.createElement("option",{value:13,selected:"13"===e.recurrence.count},"\u05e9\u05dc\u05d5\u05e9-\u05e2\u05e9\u05e8\u05d4"),r.a.createElement("option",{value:14,selected:"14"===e.recurrence.count},"\u05d0\u05e8\u05d1\u05e2-\u05e2\u05e9\u05e8\u05d4"),r.a.createElement("option",{value:15,selected:"15"===e.recurrence.count},"\u05d7\u05de\u05e9-\u05e2\u05e9\u05e8\u05d4"),r.a.createElement("option",{value:16,selected:"16"===e.recurrence.count},"\u05e9\u05e9-\u05e2\u05e9\u05e8\u05d4"),r.a.createElement("option",{value:17,selected:"17"===e.recurrence.count},"\u05e9\u05d1\u05e2-\u05e2\u05e9\u05e8\u05d4"),r.a.createElement("option",{value:18,selected:"18"===e.recurrence.count},"\u05e9\u05de\u05d5\u05e0\u05d4-\u05e2\u05e9\u05e8\u05d4"),r.a.createElement("option",{value:19,selected:"19"===e.recurrence.count},"\u05ea\u05e9\u05e2-\u05e2\u05e9\u05e8\u05d4"),r.a.createElement("option",{value:20,selected:"20"===e.recurrence.count},"\u05e2\u05e9\u05e8\u05d9\u05dd"))),r.a.createElement("br",null),r.a.createElement("div",{className:"freq-container flex space-between"},r.a.createElement("div",{className:"freq-title",for:"freq"},"\u05d7\u05d6\u05e8\u05ea\u05d9\u05d5\u05ea \u05e2\u05dc \u05d1\u05e1\u05d9\u05e1:"),r.a.createElement("select",{className:"appointment-freq-select",name:"freq",id:"freq",onChange:t},r.a.createElement("option",{value:"DAILY",selected:"DAILY"===e.recurrence.freq},"\u05d9\u05d5\u05de\u05d9"),r.a.createElement("option",{value:"WEEKLY",selected:"WEEKLY"===e.recurrence.freq},"\u05e9\u05d1\u05d5\u05e2\u05d9")))))))}));a(212);var ga={updateHoursToBlock:At,updateSlotToBlock:function(e){return function(t){t(function(e){return{type:"UPDATE_SLOT_TO_BLOCK",slotToBlock:e}}(e))}}},ka=Object(u.b)((function(e){return{slotsRangeToBlock:e.CalendarReducer.slotsRangeToBlock,isDayFullyAvailable:e.CalendarReducer.isDayFullyAvailable}}),ga)((function(e){function t(t){console.log("clickedSlotRange",t);var a=e.slotsRangeToBlock.slice();a=t.isMarked?a.map((function(t){return t.isMarked=!1,e.updateSlotToBlock(null),t})):e.slotsRangeToBlock.map((function(a){return a.end===t.end&&a.start===t.start?(a.isMarked=!0,e.updateSlotToBlock(a),a):(a.isMarked=!1,a)})),e.updateHoursToBlock(a)}return r.a.createElement("main",{className:"hours-main-container"},r.a.createElement("header",{className:"header-in-block-hours-modal flex align-center"},r.a.createElement("div",{className:"back-arrow",onClick:function(){return e.history.push("/calendarAdmin/appointmentOrBlock")}},r.a.createElement("i",{class:"fas fa-arrow-right"})),r.a.createElement("div",{className:"block-hours-title-in-modal"},"\u05d1\u05d7\u05e8\u05d5 \u05d7\u05dc\u05d5\u05df \u05d6\u05de\u05e0\u05d9\u05dd \u05d5\u05dc\u05d7\u05e6\u05d5 '\u05d0\u05d9\u05e9\u05d5\u05e8' "),r.a.createElement("div",{className:"modal-header-cls-btn-space"})),r.a.createElement("div",{className:"hours-container-warpper"},r.a.createElement("div",{className:"hours-container"},e.slotsRangeToBlock&&e.slotsRangeToBlock.map((function(a,n){return e.isDayFullyAvailable&&0===n?r.a.createElement("div",{className:"hour-container ".concat(a.isMarked?"hour-clicked":""," flex align-center justify-center"),onClick:function(){return t(a)},key:n},r.a.createElement("div",{className:"check-mark-container flex align-center"},a.isMarked&&r.a.createElement("i",{class:"fas fa-check"})),r.a.createElement("div",null,"\u05e1\u05d2\u05d9\u05e8\u05ea \u05d9\u05d5\u05dd \u05e9\u05dc\u05dd")):r.a.createElement("div",{className:"hour-container ".concat(a.isMarked?"hour-clicked":""," flex align-center justify-center"),onClick:function(){return t(a)},key:n},r.a.createElement("div",{className:"check-mark-container flex align-center"},a.isMarked&&r.a.createElement("i",{class:"fas fa-check"})),r.a.createElement("div",{className:"hour-end user-attr"},a.end),r.a.createElement("div",{className:"hours-dash"},"-"),r.a.createElement("div",{className:"hour-start user-attr"},a.start))})))))}));a(213);var Oa=Object(u.b)((function(e){return{slotToBlock:e.CalendarReducer.slotToBlock}}),{})((function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("header",{className:"header-in-block-confermation-modal flex space-between"},r.a.createElement("div",{className:"back-arrow",onClick:function(){return e.history.push("/calendarAdmin/freq")}},r.a.createElement("i",{class:"fas fa-arrow-right"})),r.a.createElement("div",{className:"block-confirmation-title-in-modal"},"\u05dc\u05e1\u05d2\u05d9\u05e8\u05ea \u05d4\u05d7\u05dc\u05d5\u05df \u05e9\u05e0\u05d1\u05d7\u05e8 \u05dc\u05d7\u05e6\u05d5 '\u05d0\u05d9\u05e9\u05d5\u05e8'"),r.a.createElement("div",{className:"modal-header-cls-btn-space"})),r.a.createElement("main",{className:"main-confermation-container flex align-center justify-center"},r.a.createElement("div",{className:"block-confermation-details"},r.a.createElement("div",{className:"table-cell1"},"\u05d7\u05dc\u05d5\u05df \u05d4\u05d6\u05de\u05e0\u05d9\u05dd \u05e9\u05e0\u05d1\u05d7\u05e8 :"),r.a.createElement("div",{className:"table-cell2"},"\u05ea\u05d0\u05e8\u05d9\u05da : ",te.convertDateToIsraelisDisplay(e.slotToBlock.date)),r.a.createElement("div",{className:"table-cell3"},"\u05d1\u05d9\u05df \u05d4\u05e9\u05e2\u05d5\u05ea : ",e.slotToBlock.end," - ",e.slotToBlock.start))))}));a(214);var ya=Object(u.b)((function(e){return{pickedTreatmentsCount:e.TreatmentReducer.pickedTreatmentsCount,availableDuration:e.TreatmentReducer.availableDuration,duration:e.TreatmentReducer.duration}}),{})((function(e){var t=Object(m.f)();return r.a.createElement("button",{className:"calendar-admin-modal-btn",onClick:function(){return e.handleModalRoute(e.duration)},disabled:function(){var a=!0;switch(t.pathname){case"/calendarAdmin/contacts":a=e.isClicked;break;case"/calendarAdmin/treatments":a=!e.pickedTreatmentsCount||!(e.duration<=e.availableDuration);break;case"/calendarAdmin/form":case"/calendarAdmin/freq":a=!1;break;case"/calendarAdmin/blockHours":a=e.isClicked;break;case"/calendarAdmin/blockConfermation":a=!1;break;case"/calendarAdmin/appointmentOrBlock":a=!0;break;default:console.log("Err updating button modal validation")}return a}()},"/calendarAdmin/contacts"===t.pathname?"\u05d1\u05d7\u05e8\u05d5 \u05dc\u05e7\u05d5\u05d7 \u05d5\u05dc\u05d7\u05e6\u05d5 \u05db\u05d0\u05df \u05dc\u05d4\u05de\u05e9\u05da":"/calendarAdmin/treatments"===t.pathname?"\u05dc\u05d7\u05e6\u05d5 \u05db\u05d0\u05df \u05dc\u05d4\u05de\u05e9\u05da":"/calendarAdmin/blockHours"===t.pathname?"\u05d0\u05d9\u05e9\u05d5\u05e8":"/calendarAdmin/appointmentOrBlock"===t.pathname?"":"\u05d0\u05d9\u05e9\u05d5\u05e8")})),Ta=(a(215),r.a.forwardRef((function(e,t){return r.a.createElement(ea.a,Object.assign({timeout:5e3,direction:"down",ref:t},e))}))),Na=Object(Z.a)({overrides:{MuiPickersToolbar:{toolbar:{backgroundColor:"#e91e63"}},MuiPickersDay:{day:{color:"black"},daySelected:{backgroundColor:"#e91e63"},dayDisabled:{color:"#e91e63"},current:{color:"#e91e63"}}}}),ja=0;var wa={updateAvailbleDuration:function(e){return function(){var t=Object(s.a)(o.a.mark((function t(a){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,a(be(e));case 3:t.next=8;break;case 5:t.prev=5,t.t0=t.catch(0),console.log("ERR WITH updateAvailbleDuration",t.t0);case 8:case"end":return t.stop()}}),t,null,[[0,5]])})));return function(e){return t.apply(this,arguments)}}()},setTreatment:me,updateHoursToBlock:At,updateIsDayFullyAvailable:function(e){return function(t){t(function(e){return{type:"UPDATE_IS_DAY_FULLY_AVAILABLE",isDayFullyAvailable:e}}(e))}},updateUserPhoneInContactSignup:je,updateTableModel:function(e){return function(t){t(function(e){return{type:"UPDATE_TABLE_MODEL",tableModel:e}}(e))}}},Sa=Object(m.h)(Object(u.b)((function(e){return{users:e.UserReducer.users,userToSchedule:e.UserReducer.userToSchedule,treatments:e.TreatmentReducer.treatments,treatment:e.TreatmentReducer.treatment,slotsRangeToBlock:e.CalendarReducer.slotsRangeToBlock,slotToBlock:e.CalendarReducer.slotToBlock,recurrence:e.CalendarReducer.recurrence,tableModel:e.CalendarReducer.tableModel,owner:e.UserReducer.owner}}),wa)((function(e){var t=Object(m.f)(),a={start:"2020-10-12T".concat(e.owner.workingHours.start,":00Z"),end:"2020-10-12T".concat(e.owner.workingHours.end,":00Z")},c=Object(n.useState)(new Date),i=Object(p.a)(c,2),l=i[0],u=i[1],f=Object(n.useState)(""),v=Object(p.a)(f,2),b=v[0],E=v[1],h=r.a.useState({}),g=Object(p.a)(h,2),k=g[0],O=g[1],y=r.a.useState(null),T=Object(p.a)(y,2),N=T[0],j=T[1],w=Object(n.useState)(!1),S=Object(p.a)(w,2),x=S[0],D=S[1],A=r.a.useState(!1),C=Object(p.a)(A,2),I=C[0],U=C[1],R=r.a.useState(!1),M=Object(p.a)(R,2),_=M[0],P=M[1],B=r.a.useState(""),L=Object(p.a)(B,2),F=L[0],H=L[1],q=r.a.useState({title:"\u05d4\u05e1\u05e8\u05ea \u05d7\u05e1\u05d9\u05de\u05d4 ",text:"\u05dc\u05d4\u05e1\u05e8\u05ea \u05d4\u05d7\u05e1\u05d9\u05de\u05d4 \u05dc\u05d7\u05e6\u05d5 \u05d0\u05d9\u05e9\u05d5\u05e8"}),V=Object(p.a)(q,2),Z=V[0],G=V[1],J=Object(n.useState)(!1),K=Object(p.a)(J,2),z=K[0],X=K[1],$=Object(n.useState)([]),Q=Object(p.a)($,2),ee=Q[0],ae=Q[1],ne=Object(n.useState)(te.getDailySlotsForPreview([a],15)),re=Object(p.a)(ne,2),ce=re[0],ie=(re[1],Object(n.useState)(!0)),le=Object(p.a)(ie,2),se=le[0],ue=le[1],me=Object(n.useState)([]),de=Object(p.a)(me,2),pe=de[0],fe=de[1],ve=Object(n.useState)([]),be=Object(p.a)(ve,2),Ee=be[0],he=be[1],ge=Object(n.useState)(te.getMonthByIdx((new Date).getMonth()+1)),ke=Object(p.a)(ge,2),Oe=ke[0],ye=ke[1],Te=Object(n.useState)(Object(s.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ge();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))),Ne=Object(p.a)(Te,2),je=Ne[0],we=Ne[1],Se=Object(n.useState)((function(){return We(l)})),xe=Object(p.a)(Se,2),De=xe[0],Ce=xe[1],Ie=Object(n.useState)(!0),Ue=Object(p.a)(Ie,2),Re=Ue[0],Me=Ue[1],_e=[],Pe=Et.getDatesWeeklyRange(l),Be=r.a.useState(!1),Le=Object(p.a)(Be,2),Fe=Le[0],He=Le[1];function qe(t,a){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e.updateIsDayFullyAvailable(n);var r=ee[t.dailyIdx].start;e.setTreatment({time:a,date:r.slice(0,10),dailyIdx:t.dailyIdx});var c=Et.getAvailbleDuration(e.tableModel,t);e.updateAvailbleDuration(c),e.updateHoursToBlock(Et.getHoursToBlock(ce,a,c,r.slice(0,10),n)),He(!0),e.history.push("/calendarAdmin/appointmentOrBlock")}function We(e){var t=te.getWeekIsosDatesForCalendar(e.getDay()+1,e);return ae(t),t.map((function(e){return e.start.slice(8,10)}))}function Ve(){return Ze.apply(this,arguments)}function Ze(){return(Ze=Object(s.a)(o.a.mark((function t(){var a,n,r;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return X(!0),t.t0=JSON,t.t1=JSON,t.next=5,je;case 5:return t.t2=t.sent,t.t3=t.t1.stringify.call(t.t1,t.t2),a=(a=(a=t.t0.parse.call(t.t0,t.t3)).map((function(e){return e.filter((function(e){return e.id!==b}))}))).map((function(e){return e.map((function(e){return e.isTemp=!0,e.isCancelApp=!0,e}))})),we(a),n={accountId:e.owner.accountId,calendarId:e.owner.calendarId,eventId:k.calendar,token:e.owner.token},t.next=14,Et.removeEventFromCalendar(n);case 14:if(r=t.sent,console.log("confiremdn deleted from calendar",r),r){t.next=19;break}return console.log("problem deleting event"),t.abrupt("return");case 19:we(Object(s.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ge(l);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))),k.mongo&&ft.removeEventFromDB(k.mongo);case 21:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Ge(){return Ye.apply(this,arguments)}function Ye(){return(Ye=Object(s.a)(o.a.mark((function e(){var t,a=arguments;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:new Date,e.next=3,Promise.all(te.getWeekIsosDatesForCalendar(t.getDay()+1,t).map(function(){var e=Object(s.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Et.getEventsFromCalendar(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Je(e){return Xe.apply(this,arguments)}function Xe(){return(Xe=Object(s.a)(o.a.mark((function e(t){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ce(We(t)),ye(te.getMonthByIdx(t.getMonth()+1)),_e=[],Me(!0),e.next=6,Ge(t);case 6:(a=e.sent)&&Me(!1),we(a),u(t);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(n.useEffect)((function(){Object(s.a)(o.a.mark((function t(){var a,n,c;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,je;case 2:if(a=t.sent,n=!1,a.forEach((function(e){e.forEach((function(e){e.isTemp&&(n=!0)}))})),n||(X(!1),U(!1)),e.tableModel.length){t.next=14;break}return t.t0=Et,t.t1=ce,t.next=11,je;case 11:t.t2=t.sent,c=t.t0.buildWeeklyModel.call(t.t0,t.t1,t.t2),e.updateTableModel(c);case 14:if(a&&Me(!1),!a||!ce){t.next=18;break}return console.log("calendaradmin recreated"),t.abrupt("return",fe(ce.map((function(e,t){if(t!==ce.length-1)return r.a.createElement("tr",{key:t},r.a.createElement("td",{className:"td-hours"},te.timeToDisplay(e)),a.map((function(a,c){var i=0;if(a.length){var l=!1;return a.map((function(o,s){var u=c%2===0?"even-event":"odd-event";i>2&&(i=0);var m=te.checkIfTsInRange(e,o.start,o.end,30);return m.occupied?(l=!0,_e.includes(o.id)?"":(_e.push(o.id),r.a.createElement("td",{className:"occupied-cell ".concat("block - block"===o.name?"blocked-cell":""," ").concat(u,"-").concat(i," ").concat(o.isTemp&&!o.isCancelApp?"temp-cell":""),key:s,onClick:function(){return $e(o)},rowSpan:m.rowspan},r.a.createElement("div",{className:"occupied-cell-content"},r.a.createElement("div",{className:"event-time-wrapper"},r.a.createElement("div",{className:"event-time"},te.timeToDisplay(o.start.slice(11,16)),"-",te.timeToDisplay(o.end.slice(11,16)))),"block - block"===o.name?r.a.createElement("div",null,"\u05e1\u05d2\u05d5\u05e8"):r.a.createElement("div",{className:"event-desc"},r.a.createElement("div",{className:"event-name"},te.getSplitedEventDesc(o.name).name),r.a.createElement("div",{className:"event-treatment"},te.getSplitedEventDesc(o.name).treatment)))))):a.length!==s+1||l?void i++:r.a.createElement("td",{className:"available-cell",key:s,onClick:n?function(){return U(!0)}:function(){return qe({tsIdx:t,dailyIdx:c},e)}},r.a.createElement("i",{className:"fas fa-plus"}))}))}return r.a.createElement("td",{key:c,className:"available-cell",onClick:n?function(){return U(!0)}:function(){return qe({tsIdx:t,dailyIdx:c},e,!0)}},r.a.createElement("i",{className:"fas fa-plus"}))})))}))));case 18:case"end":return t.stop()}}),t)})))()}),[je,e.updateTableModel,e.tableModel]),Object(n.useEffect)((function(){!function(){"/calendarAdmin/contacts"===t.pathname&&ue(!e.users.find((function(e){return e.isMarked})));"/calendarAdmin/blockHours"===t.pathname&&ue(!e.slotsRangeToBlock.find((function(e){return e.isMarked})))}()}),[e.users,e.slotsRangeToBlock]),Object(n.useEffect)((function(){2===ja&&(console.log(k),Ve(),ja=0,P(!1))}),[k]),Object(n.useEffect)((function(){Object(s.a)(o.a.mark((function t(){var a;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Et,t.t1=ce,t.next=4,je;case 4:t.t2=t.sent,a=t.t0.buildWeeklyModel.call(t.t0,t.t1,t.t2),e.updateTableModel(a);case 7:case"end":return t.stop()}}),t)})))()}),[je]);var $e=function(){var e=Object(s.a)(o.a.mark((function e(t){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=9;break}return"block - block"===t.name?H("block"):H("appointment"),t.id.length>60&&P(!0),E(t.id),e.next=6,ft.getMongoEventByEventCalendarId(t.id);case 6:a=e.sent,console.log("mongo event",a),O(a?{mongo:a._id,calendar:t.id}:{mongo:"",calendar:t.id});case 9:U(!0);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),et=function(e){if(console.log(_,"reccurenceBlock"),e)if(ja++,console.log(ja,"approvedCounter"),_){if(console.log(_,"reccurenceBlock"),G({title:"\u05e1\u05d2\u05d9\u05e8\u05d4 \u05e9\u05d7\u05d5\u05d6\u05e8\u05ea \u05e2\u05dc \u05e2\u05e6\u05de\u05d4",text:"\u05dc\u05de\u05d7\u05d9\u05e7\u05ea \u05db\u05dc \u05d4\u05de\u05d5\u05e4\u05e2\u05d9\u05dd \u05d4\u05d7\u05d5\u05d6\u05e8\u05d9\u05dd \u05e9\u05dc \u05d4\u05e1\u05d2\u05d9\u05e8\u05d4, \u05dc\u05d7\u05e6\u05d5 \u05d0\u05d9\u05e9\u05d5\u05e8. \u05dc\u05de\u05d7\u05d9\u05e7\u05d4 \u05d1\u05ea\u05d0\u05e8\u05d9\u05da \u05d4\u05e1\u05e4\u05e6\u05d9\u05e4\u05d9 \u05e9\u05e0\u05d1\u05d7\u05e8 \u05dc\u05d7\u05e6\u05d5 \u05d1\u05d9\u05d8\u05d5\u05dc"}),2===ja)return function(){at.apply(this,arguments)}(),U(!1),void G({title:"\u05d4\u05e1\u05e8\u05ea \u05d7\u05e1\u05d9\u05de\u05d4 ",text:"\u05dc\u05d4\u05e1\u05e8\u05ea \u05d4\u05d7\u05e1\u05d9\u05de\u05d4 \u05dc\u05d7\u05e6\u05d5 \u05d0\u05d9\u05e9\u05d5\u05e8"})}else N?(U(!1),we(N),j(null)):(U(!1),Ve(),ja=0,G({title:"\u05d4\u05e1\u05e8\u05ea \u05d7\u05e1\u05d9\u05de\u05d4 ",text:"\u05dc\u05d4\u05e1\u05e8\u05ea \u05d4\u05d7\u05e1\u05d9\u05de\u05d4 \u05dc\u05d7\u05e6\u05d5 \u05d0\u05d9\u05e9\u05d5\u05e8"}));else!e&&ja?(U(!1),ja=0,P(!1),G({title:"\u05d4\u05e1\u05e8\u05ea \u05d7\u05e1\u05d9\u05de\u05d4 ",text:"\u05dc\u05d4\u05e1\u05e8\u05ea \u05d4\u05d7\u05e1\u05d9\u05de\u05d4 \u05dc\u05d7\u05e6\u05d5 \u05d0\u05d9\u05e9\u05d5\u05e8"}),N?(we(N),j(null)):Ve()):(N&&(we(N),j(null)),U(!1))};function at(){return(at=Object(s.a)(o.a.mark((function e(){var t,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=k.calendar.slice(0,40),e.next=3,ft.getReccurenceMongoEventBySubStrId(t);case 3:a=e.sent,console.log(a,"reccurenceMongoEvent"),E(a.eventId),O({mongo:a._id,calendar:a.eventId});case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function nt(){return(nt=Object(s.a)(o.a.mark((function t(a){var n,r,c,i,s,u,m,d,p,f;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return X(!0),n=oe.getMarkedTreatmentsStr(e.treatments),r=e.userToSchedule,c=r.phone,i=r.email,s=r.name,u=te.changeTimeForDisplay(e.treatment.time,0),m="".concat(e.treatment.date,"T").concat(u,":00Z"),u=te.calculateEndTime(u,a),d="".concat(e.treatment.date,"T").concat(u,":00Z"),p={id:te.idGen(),name:"".concat(s," - ").concat(n),start:m,end:d,isTemp:!0},t.t0=JSON,t.t1=JSON,t.next=12,je;case 12:return t.t2=t.sent,t.t3=t.t1.stringify.call(t.t1,t.t2),(f=t.t0.parse.call(t.t0,t.t3))[e.treatment.dailyIdx].push(p),we(f),t.next=19,Et.setAppointment(n,a,c,i,s,e.treatment,e.owner);case 19:if(t.sent){t.next=23;break}return console.log("couldnt schduale appointment"),t.abrupt("return");case 23:return t.t4=we,t.next=26,Ge(l);case 26:t.t5=t.sent,(0,t.t4)(t.t5);case 28:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function rt(){return(rt=Object(s.a)(o.a.mark((function t(a){var n,r,c,i,u,m,p,f,v,b,E,h,g,k,O;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return X(!0),n=te.changeTimeForDisplay(e.slotToBlock.start,0),r=te.changeTimeForDisplay(e.slotToBlock.end,0),c="".concat(e.slotToBlock.date,"T").concat(n,":00Z"),i="".concat(e.slotToBlock.date,"T").concat(r,":00Z"),u={id:te.idGen(),name:"block - block",start:c,end:i,isTemp:!0},t.t0=JSON,t.t1=JSON,t.next=10,je;case 10:for(t.t2=t.sent,t.t3=t.t1.stringify.call(t.t1,t.t2),(m=t.t0.parse.call(t.t0,t.t3))[e.treatment.dailyIdx].push(u),p=u.start.slice(11,16),f=ce.findIndex((function(e){return e===p})),v=u.end.slice(11,16),b=ce.findIndex((function(e){return e===v})),E=1;E<e.recurrence.count&&"DAILY"===e.recurrence.freq;E++){for(u=Object(d.a)({},u),c=(c=new Date(new Date(c).getTime()+864e5)).toISOString(),i=(i=new Date(new Date(i).getTime()+864e5)).toISOString(),u.id=te.idGen(),u.start=c,u.end=i,h=!1,g=f;g<b;g++)e.tableModel[g][e.treatment.dailyIdx+E]||(h=!0,console.log(ce[g],"is not availble at",e.treatment.dailyIdx+E));h||m[e.treatment.dailyIdx+E].push(u)}return t.t4=Ae.a,t.next=22,je;case 22:return t.t5=t.sent,k=(0,t.t4)(t.t5),we(m),t.next=27,Et.blockSlotRange(e.slotToBlock,"block",a,e.owner);case 27:if(O=t.sent,!Array.isArray(O)){t.next=35;break}return H("occupied"),he(O),j(k),X(!1),U(!0),t.abrupt("return");case 35:console.log("confirmed eventId",O.id),we(Object(s.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ge(l);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))));case 37:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function ct(){He(!1),ue(!0),e.updateUserPhoneInContactSignup(""),W.initApp(),e.history.push("/calendarAdmin")}return r.a.createElement(r.a.Fragment,null,r.a.createElement(st.a,{utils:lt.a,locale:ot.a},r.a.createElement(Y.a,{theme:Na},r.a.createElement(ut.a,{disablePast:!0,shouldDisableDate:function(e){return 6===e.getDay()},variant:"dialog",okLabel:"\u05d0\u05d9\u05e9\u05d5\u05e8",cancelLabel:"\u05d1\u05d9\u05d8\u05d5\u05dc",open:x,onOpen:function(){return D(!0)},onClose:function(){return D(!1)},format:"MM/dd/yyyy",id:"date-picker-inline",disableToolbar:!0,value:l,onChange:Je,InputProps:{disableUnderline:!0,style:{width:"0",height:"0px"}},keyboardbuttonprops:{"aria-label":"change date"}}))),r.a.createElement(Ke.a.div,{initial:"out",exit:"in",animate:"in",variants:ze.getMotionStyle("pageVariantsWithTextAlign"),transition:ze.getMotionStyle("pageTransition"),style:{width:"100%",height:"100%"}},r.a.createElement("main",{className:"calendar-admin-container"},r.a.createElement("div",{className:"header-app flex justifiy-center align-center space-between"},r.a.createElement("div",{className:"weekly-dates-container flex space-between align-center",onClick:function(){return D(!0)}},r.a.createElement("i",{className:"calendar-icon fas fa-calendar-week"}),r.a.createElement("div",{className:"weekly-dates-text"},Pe.firstDay,r.a.createElement("br",null),Pe.lastDay," ")),r.a.createElement("div",{id:"text2",onClick:function(){return e.history.push("/".concat(e.owner.workPlace))}},"Tori",r.a.createElement("i",{className:"fas fa-tasks"}))),r.a.createElement(Ct.a,{onSwiped:function(e){return t=e.dir,void(Re||("Left"===t&&l.getTime()>(new Date).getTime()?Je(new Date(l.setDate(l.getDate()-7))):"Right"===t&&Je(new Date(l.setDate(l.getDate()+7)))));var t}},r.a.createElement("header",{className:"days-header-container flex space-between"},r.a.createElement("div",{className:"days-name-container month-container"},r.a.createElement("div",{className:"month-name"},Oe)),r.a.createElement("div",{className:"days-name-container"},r.a.createElement("div",{className:"daily-name"},"\u05e8\u05d0\u05e9\u05d5\u05df"),r.a.createElement("div",{className:"daily-num"}," ",De[0])),r.a.createElement("div",{className:"days-name-container"},r.a.createElement("div",{className:"daily-name"},"\u05e9\u05e0\u05d9"),r.a.createElement("div",{className:"daily-num"}," ",De[1])),r.a.createElement("div",{className:"days-name-container"},r.a.createElement("div",{className:"daily-name"},"\u05e9\u05dc\u05d9\u05e9\u05d9"),r.a.createElement("div",{className:"daily-num"}," ",De[2])),r.a.createElement("div",{className:"days-name-container"},r.a.createElement("div",{className:"daily-name"},"\u05e8\u05d1\u05d9\u05e2\u05d9"),r.a.createElement("div",{className:"daily-num"}," ",De[3])),r.a.createElement("div",{className:"days-name-container"},r.a.createElement("div",{className:"daily-name"},"\u05d7\u05de\u05d9\u05e9\u05d9"),r.a.createElement("div",{className:"daily-num"}," ",De[4])),r.a.createElement("div",{className:"days-name-container"},r.a.createElement("div",{className:"daily-name"},"\u05e9\u05d9\u05e9\u05d9"),r.a.createElement("div",{className:"daily-num"}," ",De[5]))),r.a.createElement("div",null,Re?r.a.createElement("div",{className:"loader-container flex justify-center align-center space-around"},r.a.createElement(Qe,null)):r.a.createElement("div",{className:"table-container"},r.a.createElement("table",null,r.a.createElement("tbody",null,pe.length&&pe)),r.a.createElement("footer",{className:"calendar-footer flex align-center justify-center"},r.a.createElement("div",{className:"footer-hours"},ce[ce.length-1]))))),r.a.createElement("div",null,r.a.createElement(Yt.a,{open:I,TransitionComponent:Ta,keepMounted:!0,onClose:function(){return et(!1)},"aria-labelledby":"alert-dialog-slide-title","aria-describedby":"alert-dialog-slide-description"},r.a.createElement(Xt.a,{id:"alert-dialog-slide-title"},z?"\u05d0\u05e8\u05e2\u05d4 \u05e9\u05d2\u05d9\u05d0\u05d4":"block"===F?Z.title:"appointment"===F?"\u05d1\u05d9\u05d8\u05d5\u05dc \u05ea\u05d5\u05e8":Ee.length>1?"\u05d4\u05ea\u05d0\u05e8\u05d9\u05db\u05d9\u05dd \u05d4\u05e0\u05f4\u05dc \u05db\u05d1\u05e8 \u05ea\u05e4\u05d5\u05e1\u05d9\u05dd":1===Ee.length?"\u05d4\u05ea\u05d0\u05e8\u05d9\u05da \u05d4\u05e0\u05f4\u05dc \u05db\u05d1\u05e8 \u05ea\u05e4\u05d5\u05e1":""),r.a.createElement(Kt.a,null,r.a.createElement(zt.a,{id:"alert-dialog-slide-description"},z?"\u05e1\u05d2\u05e8\u05d5 \u05d0\u05ea \u05d4\u05de\u05d5\u05d3\u05e2\u05d4 \u05d5\u05e0\u05e1\u05d5 \u05e9\u05e0\u05d9\u05ea":"block"===F?Z.text:"appointment"===F?" \u05dc\u05d1\u05d9\u05d8\u05d5\u05dc \u05d4\u05ea\u05d5\u05e8 \u05dc\u05d7\u05e6\u05d5 \u05d0\u05d9\u05e9\u05d5\u05e8":Ee.length>1?"\u05d4\u05ea\u05d0\u05e8\u05d9\u05db\u05d9\u05dd - ".concat(Ee.map((function(e){return te.convertDateTo4DigitsDisplay(e)}))," \u05db\u05d1\u05e8 \u05ea\u05e4\u05d5\u05e1\u05d9\u05dd, \u05d4\u05e1\u05d2\u05d9\u05e8\u05d5\u05ea \u05dc\u05d0 \u05e0\u05e7\u05d1\u05e2\u05d5!"):1===Ee.length?"\u05d4\u05ea\u05d0\u05e8\u05d9\u05da ".concat(Ee.map((function(e){return te.convertDateTo4DigitsDisplay(e)}))," \u05db\u05d1\u05e8 \u05ea\u05e4\u05d5\u05e1, \u05d4\u05e1\u05d2\u05d9\u05e8\u05d5\u05ea \u05dc\u05d0 \u05e0\u05e7\u05d1\u05e2\u05d5!"):"")),r.a.createElement(Jt.a,null,r.a.createElement(Zt.a,{onClick:function(){return et(!1)},color:"primary"},"\u05d1\u05d9\u05d8\u05d5\u05dc"),z?r.a.createElement(Zt.a,{onClick:function(){return et(!1)},color:"primary"},"\u05d0\u05d9\u05e9\u05d5\u05e8"):r.a.createElement(Zt.a,{onClick:function(){return et(!0)},color:"primary"},"\u05d0\u05d9\u05e9\u05d5\u05e8")))),Fe&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"modal-screen",onClick:ct}),r.a.createElement("div",{className:"apointments-modal"},r.a.createElement(Wt.a,null,r.a.createElement(m.a,{path:"/calendarAdmin/contacts",exact:!0,component:va}),r.a.createElement(m.a,{path:"/calendarAdmin/contacts/signup",component:ra}),r.a.createElement(m.a,{path:"/calendarAdmin/treatments",component:tt}),r.a.createElement(m.a,{path:"/calendarAdmin/form",component:Ft}),r.a.createElement(m.a,{path:"/calendarAdmin/freq",component:ha}),r.a.createElement(m.a,{path:"/calendarAdmin/appointmentOrBlock",component:ba}),r.a.createElement(m.a,{path:"/calendarAdmin/blockHours",component:ka}),r.a.createElement(m.a,{path:"/calendarAdmin/blockConfermation",component:Oa})),"/calendarAdmin/appointmentOrBlock"!==t.pathname&&"/calendarAdmin/contacts/signup"!==t.pathname&&r.a.createElement(ya,{handleModalRoute:function(a){"/calendarAdmin/contacts"===t.pathname&&(e.history.push("/calendarAdmin/treatments"),ue(!0)),"/calendarAdmin/treatments"===t.pathname&&e.history.push("/calendarAdmin/form"),"/calendarAdmin/freq"===t.pathname&&e.history.push("/calendarAdmin/blockConfermation"),"/calendarAdmin/form"===t.pathname&&(!function(e){nt.apply(this,arguments)}(a),ct()),"/calendarAdmin/blockHours"===t.pathname&&e.history.push("/calendarAdmin/freq"),"/calendarAdmin/freq"===t.pathname&&e.history.push("/calendarAdmin/blockConfermation"),"/calendarAdmin/blockConfermation"===t.pathname&&(!function(e){rt.apply(this,arguments)}(e.recurrence),ct())},isClicked:se}),r.a.createElement("div",{className:"close-admin-modal-btn",onClick:ct},r.a.createElement("i",{class:"fas fa-times"})))))))})));var xa={updateLoggedInUser:ye},Da=Object(u.b)((function(e){return{loggedInUser:e.UserReducer.loggedInUser}}),xa)((function(e){return Object(n.useEffect)((function(){Object(s.a)(o.a.mark((function t(){var a;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,C.loadFromStorage("tori-user");case 2:if(!(a=t.sent)||e.loggedInUser){t.next=10;break}return t.t0=e,t.next=7,I.getUser(a.phone);case 7:return t.t1=t.sent,t.next=10,t.t0.updateLoggedInUser.call(t.t0,t.t1);case 10:case"end":return t.stop()}}),t)})))()}),[]),r.a.createElement(Wt.a,null,r.a.createElement("div",{className:"App"},r.a.createElement(ee,null),r.a.createElement(m.c,null,r.a.createElement(m.a,{path:"/calendar",component:Rt}),r.a.createElement(m.a,{path:"/cancelAppointment",component:qt}),r.a.createElement(m.a,{path:"/form",component:Ft}),r.a.createElement(m.a,{path:"/treatments",component:tt}),r.a.createElement(m.a,{path:"/signupOrLogin",component:Vt}),r.a.createElement(m.a,{path:"/login",component:Qt}),r.a.createElement(m.a,{path:"/signup",component:ra}),r.a.createElement(m.a,{path:"/editUser",component:sa}),r.a.createElement(m.a,{path:"/calendarAdmin",component:Sa}),r.a.createElement(m.a,{path:"/advertise",component:ma}),r.a.createElement(m.a,{path:"/adminContacts",component:pa}),r.a.createElement(m.a,{path:"/:workPlace",component:la}))))})),Aa=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Ca(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(u.a,{store:q},r.a.createElement(Da,null))),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");Aa?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):Ca(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):Ca(t,e)}))}}()},88:function(e,t,a){}},[[134,1,2]]]);
//# sourceMappingURL=main.b072c7ab.chunk.js.map