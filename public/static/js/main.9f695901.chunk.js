(this.webpackJsonpbeautydee=this.webpackJsonpbeautydee||[]).push([[0],{102:function(e,t,a){},128:function(e,t,a){e.exports=a(188)},133:function(e,t,a){},134:function(e,t,a){},140:function(e,t,a){},141:function(e,t,a){},160:function(e,t,a){},161:function(e,t,a){},162:function(e,t,a){},163:function(e,t,a){},183:function(e,t,a){},184:function(e,t,a){},185:function(e,t,a){},186:function(e,t,a){},187:function(e,t,a){},188:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(12),i=a.n(c),o=(a(133),a(16)),s=a(17),l=a(227),u=a(241),m=a(231);a(134);var p=Object(o.g)((function(e){var t=r.a.useState(0),a=Object(s.a)(t,2),c=a[0],i=a[1],p=Object(o.f)();Object(n.useEffect)((function(){"/cancelAppointment"!==p.pathname?i(0):i(1)}));var d={width:"50%",boxShadow:"none",color:"#172b4d"};return r.a.createElement(l.a,{position:"static",style:{boxShadow:"none"}},r.a.createElement(u.a,{value:c,onChange:function(t,a){i(a),1===a?e.history.push("/cancelAppointment"):e.history.push("/")},className:"tabs"},r.a.createElement(m.a,{label:"\u05d6\u05d9\u05de\u05d5\u05df",style:d}),r.a.createElement(m.a,{label:"\u05d1\u05d9\u05d8\u05d5\u05dc",style:d})))})),d=a(19),f=a(112),v=a(232),b=a(233),h=a(246),E=a(234),g=a(243),T=(a(140),Object(f.a)({palette:{primary:{main:"#e91e63"}}})),y=Object(v.a)((function(e){return{root:{width:"100%"}}}));var S=Object(d.b)((function(e){return{steps:e.StepperReducer.steps,activeStep:e.StepperReducer.step}}),{})((function(e){var t=y();return r.a.createElement("div",{className:t.root},r.a.createElement(b.a,{theme:T},r.a.createElement(h.a,{activeStep:e.activeStep},e.steps.map((function(e,t){var a={};return r.a.createElement(E.a,Object.assign({key:e},{}),r.a.createElement(g.a,a,e,"  "))})))))}));a(141);function O(e){var t=Object(o.f)();return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"app-header"},r.a.createElement("header",{className:"flex upper-header align-center"},r.a.createElement("h2",{id:"text",className:"logo"}," Tor-Li",r.a.createElement("i",{className:"fas fa-tasks"}))),r.a.createElement(p,null),"/cancelAppointment"===t.pathname?"":r.a.createElement(S,null)))}var j=a(7),w=a.n(j),k=a(15),A=a(107),x=Object(A.a)(),N=a(56),D=a.n(N),C=D.a.create({withCredentials:!0}),_=function(e,t){return M(e,"GET",t)},I=function(e,t){return M(e,"POST",t)},R=function(e,t){return M(e,"PUT",t)},P=function(e,t){return M(e,"DELETE",t)};function M(e){return U.apply(this,arguments)}function U(){return(U=Object(k.a)(w.a.mark((function e(t){var a,n,r,c=arguments;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=c.length>1&&void 0!==c[1]?c[1]:"get",n=c.length>2&&void 0!==c[2]?c[2]:null,e.prev=2,e.next=5,C({url:"".concat("/api/").concat(t),method:a,data:n});case 5:return r=e.sent,e.abrupt("return",r.data);case 9:throw e.prev=9,e.t0=e.catch(2),console.log("Had Issues ".concat(a,"ing to the backend, endpoint: ").concat(t,", with data: ").concat(n)),console.dir(e.t0),e.t0.response&&401===e.t0.response.status&&x.push("/login"),e.t0;case 15:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}var F={englishToHebrew:function(e){var t;switch(e){case"minutes":t="\u05d3\u05e7\u05f3";break;case"build":t="\u05d1\u05e0\u05d9\u05d9\u05d4";break;case"filling":t="\u05de\u05d9\u05dc\u05d5\u05d9";break;case"medical-manicure":t="\u05de\u05e0\u05d9\u05e7\u05d5\u05e8 \u05e8\u05e4\u05d5\u05d0\u05d9";break;case"gel":t="\u05dc\u05e7 \u05d2\u05f3\u05dc";break;case"medical-pedicure":t="\u05e4\u05d3\u05d9\u05e7\u05d5\u05e8";break;case"medical-pedicure-gel":t="\u05e4\u05d3\u05d9\u05e7\u05d5\u05e8 \u05e8\u05e4\u05d5\u05d0\u05d9 \u05e2\u05dd \u05dc\u05e7 \u05d2\u05f3\u05dc";break;case"half-pedicure":t="\u05d7\u05e6\u05d9 \u05e4\u05d3\u05d9\u05e7\u05d5\u05e8";break;case"half-pedicure-gel":t="\u05d7\u05e6\u05d9 \u05e4\u05d3\u05d9\u05e7\u05d5\u05e8 \u05e2\u05dd \u05d2\u05f3\u05dc";break;case"eyebrows-mustache":t="\u05d2\u05d1\u05d5\u05ea \u05d5\u05e9\u05e4\u05dd";break;default:t="\u05d1\u05e8\u05d9\u05e8\u05ea \u05de\u05d7\u05d3\u05dc"}return" "+t},getIsosDate:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Date,a=new Date(t.getTime());return a.setDate(a.getDate()+e),a=a.toISOString().slice(0,10)},getTimeSlotsForPreview:B,getDailySlotsForPreview:function(e,t){var a=e.map((function(e){return B(e,t)}));return[].concat.apply([],a)},changeTimeForDisplay:function(e,t){var a=+e.slice(0,2)-t,n=e.slice(3,5);return(a=L(a))+":"+n},idGen:function(){return"_"+Math.random().toString(36).substr(2,9)},calculateEndTime:function(e,t){var a=+e.slice(0,2),n=+e.slice(3,5);t%60===30?30===n?(a+=Math.floor(t/60)+1,n="00"):(a+=Math.floor(t/60),n="30"):(a+=t/60,n="00");return(a=L(a))+":"+n},arrayToString:function(e){var t="";return e.forEach((function(a,n){e.length!==n+1?t+=a.name+", ":t+=a.name})),t},convertDateToIsraelisDisplay:function(e){var t=e.split("-");return"".concat(t[2],"/").concat(t[1],"/").concat(t[0])},getDayByHebrewWord:function(e){return console.log(e),["\u05e8\u05d0\u05e9\u05d5\u05df","\u05e9\u05e0\u05d9","\u05e9\u05dc\u05d9\u05e9\u05d9","\u05e8\u05d1\u05d9\u05e2\u05d9","\u05d7\u05de\u05d9\u05e9\u05d9","\u05e9\u05d9\u05e9\u05d9","\u05e9\u05d1\u05ea"][e]}};function B(e,t){var a=[],n=e.start.slice(0,4),r=e.start.slice(5,7),c=e.start.slice(8,10),i=+e.start.slice(11,13),o=e.start.slice(14,16),s=new Date(n,r-1,c,i+3,o,0,0);n=e.end.slice(0,4),r=e.end.slice(5,7),c=e.end.slice(8,10),i=+e.end.slice(11,13),o=e.end.slice(14,16);var l=new Date(n,r-1,c,i+3,o,0,0),u=s;i=u.getHours(),o=u.getMinutes();var m=L(i)+":"+L(o);for(u.getTime()+60*t*1e3<l.getTime()&&a.push(m);u.getTime()+60*t*1e3<l.getTime();)i=(u=new Date(u.getTime()+18e5)).getHours(),o=u.getMinutes(),m=L(i)+":"+L(o),a.push(m);return a}function L(e){return e=e<10?"0"+e:e}var W={getTreatments:function(){return _("treatment")},getById:function(e){return _("treatment/".concat(e))},remove:function(e){return P("treatment/".concat(e))},update:function(e){return R("treatment/".concat(e._id),e)},updateTreatments:function(e,t){var a=e.findIndex((function(e){return e._id===t._id}));return e[a]=t,e},getMarkedTreatmentsStr:function(e){return e=e.filter((function(e){return e.marked})),F.arrayToString(e)}};function H(e){return{type:"SET_TREATMENTS",treatments:e}}function V(e){return{type:"SET_TREATMENT",treatment:e}}function G(e){return{type:"UPDATE_TREATMENTS",treatments:e}}function z(e){return{type:"UPDATE_DURATION",duration:e}}var J=a(10),X=a(70),Y=a(71),Z=a(76),q=a(75),K=a(114),$=a(21),Q=a(108),ee=a.n(Q),te=a(240),ae=a(244),ne=a(247),re=Object(f.a)({direction:"rtl"}),ce=Object($.b)({plugins:[].concat(Object(K.a)(Object(te.a)().plugins),[ee()()])});function ie(e){var t=Object(n.useState)(e.marked),a=Object(s.a)(t,2),c=a[0],i=a[1];return r.a.createElement(ae.b,{jss:ce},r.a.createElement(b.a,{theme:re},r.a.createElement("div",{dir:"rtl"},r.a.createElement(ne.a,{checked:c,onChange:function(t){c?(e.updateDuration(!1),e.updatePickedTreatments(!1),console.log("2")):(e.updateDuration(!0),e.updatePickedTreatments(!0),console.log("1")),i(t.target.checked)},name:"checked",inputProps:{"aria-label":"secondary checkbox"}}))))}a(160);var oe=function(e){Object(Z.a)(a,e);var t=Object(q.a)(a);function a(){var e;Object(X.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={updatedTreatment:e.props.treatment,treatmentsToUpdate:e.props.treatments},e.updateDuration=function(t){t?e.props.updateDuration(+e.props.treatment.duration):e.props.updateDuration(-1*+e.props.treatment.duration)},e.updatePickedTreatments=function(t){e.setState({updatedTreatment:Object(J.a)(Object(J.a)({},e.state.updatedTreatment),{},{marked:t})},(function(){var t=W.updateTreatments(e.state.treatmentsToUpdate,e.state.updatedTreatment);e.setState({treatmentsToUpdate:t})}))},e}return Object(Y.a)(a,[{key:"render",value:function(){var e=this.state.updatedTreatment;return r.a.createElement("div",{className:"treatment-preview ".concat(e.marked?"marked-by-switch":"")},e&&r.a.createElement("div",{className:" preview-container flex align-center space-between"},r.a.createElement("div",{className:"align-col-name"},e.name),r.a.createElement("div",{className:"align-col"},"\u20aa"+e.price),r.a.createElement("div",{className:"align-col"},e.duration+F.englishToHebrew("minutes")),r.a.createElement(ie,{className:"align-col",marked:e.marked,updateDuration:this.updateDuration,updatePickedTreatments:this.updatePickedTreatments})))}}]),a}(n.Component);var se={updateDuration:function(e){return function(){var t=Object(k.a)(w.a.mark((function t(a){return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,a(z(e));case 3:t.next=8;break;case 5:t.prev=5,t.t0=t.catch(0),console.log("TreatmentActions: err in addDuration",t.t0);case 8:case"end":return t.stop()}}),t,null,[[0,5]])})));return function(e){return t.apply(this,arguments)}}()},updateTreatments:function(e){return console.log(e),function(){var t=Object(k.a)(w.a.mark((function t(a){return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,a(G(e));case 3:t.next=8;break;case 5:t.prev=5,t.t0=t.catch(0),console.log("TreatmentActions: err in updateTreatments",t.t0);case 8:case"end":return t.stop()}}),t,null,[[0,5]])})));return function(e){return t.apply(this,arguments)}}()}},le=Object(d.b)((function(e){return{duration:e.TreatmentReducer.duration,treatments:e.TreatmentReducer.treatments}}),se)(oe);a(161);function ue(e){return r.a.createElement("div",{className:"treatment-list main-container flex column"},e.treatments.map((function(t){var a=F.idGen();return r.a.createElement("div",{key:a},r.a.createElement(le,{treatment:t,getTreatmentsToUpdate:e.getTreatmentsToUpdate}))})))}function me(e){return function(){var t=Object(k.a)(w.a.mark((function t(a){return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,a(pe(e));case 3:t.next=8;break;case 5:t.prev=5,t.t0=t.catch(0),console.log("StepperActions: err in updateActiveStep",t.t0);case 8:case"end":return t.stop()}}),t,null,[[0,5]])})));return function(e){return t.apply(this,arguments)}}()}function pe(e){return{type:"UPDATE_ACTIVE_STEP",step:e}}a(162);var de={updateActiveStep:me},fe=Object(o.g)(Object(d.b)((function(e){return{steps:e.StepperReducer.steps,activeStep:e.StepperReducer.step,duration:e.TreatmentReducer.duration,treatment:e.TreatmentReducer.treatment}}),de)((function(e){var t=Object(n.useState)(""),a=Object(s.a)(t,2),c=a[0],i=a[1],o=Object(n.useState)(""),l=Object(s.a)(o,2),u=l[0],m=l[1],p=Object(n.useState)(""),d=Object(s.a)(p,2),f=d[0],v=d[1];function b(t){e.activeStep+t===3&&(e.setAppointment(),e.handleOpen()),e.updateActiveStep(e.activeStep+t),!e.activeStep&&t>0?e.history.push("/calendar"):1===e.activeStep&&t>0?e.history.push("/form"):2===e.activeStep&&t<0?e.history.push("/calendar"):1===e.activeStep&&t<0&&e.history.push("/")}return Object(n.useEffect)((function(){!function(){1!==e.activeStep?i(""):i("hide-btn");e.activeStep?v("active-btn"):v("");2===e.activeStep&&!e.treatment||e.duration?m("active-btn"):m("")}()})),r.a.createElement("div",{className:"StepperApp-btns-container flex align-center space-around "},r.a.createElement("div",{className:"StepperApp-btn-wrraper StepperApp-btn-wrraper-back"},r.a.createElement("button",{className:"StepperApp-btn ".concat(f),disabled:0===e.activeStep,onClick:function(){return b(-1)}},"\u05d7\u05d6\u05d5\u05e8")),r.a.createElement("div",{className:"StepperApp-btn-wrraper StepperApp-btn-wrraper-next ".concat(c," ")},r.a.createElement("button",{className:"StepperApp-btn ".concat(u),onClick:function(){return b(1)},disabled:!e.duration||2===e.activeStep&&!e.treatment||void 0},2===e.activeStep?"\u05d0\u05e9\u05e8":"\u05d4\u05d1\u05d0")))}))),ve=a(41),be=(a(163),a(102),{in:{opacity:1,x:"0"},out:{opacity:0,x:"50%"}}),he={duration:1.3,type:"spring",stiffness:50};var Ee={loadTreatments:function(){return function(){var e=Object(k.a)(w.a.mark((function e(t){var a;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,W.getTreatments();case 3:a=e.sent,t(H(a)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("TreatmentActions: err in loadTreatments",e.t0);case 10:case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()}},ge=Object(d.b)((function(e){return{treatments:e.TreatmentReducer.treatments}}),Ee)((function(e){var t=e.loadTreatments,a=e.treatments;return Object(n.useEffect)((function(){a||t()}),[t,a]),a?r.a.createElement(r.a.Fragment,null,r.a.createElement(ve.a.div,{initial:"out",exit:"in",animate:"in",variants:be,transition:he},r.a.createElement(ue,{treatments:a})),r.a.createElement(fe,null)):"loading..."})),Te=a(111),ye=a(113),Se=a(23),Oe=a(238),je=a(109),we=a.n(je),ke=function(e){Object(Z.a)(a,e);var t=Object(q.a)(a);function a(){return Object(X.a)(this,a),t.apply(this,arguments)}return Object(Y.a)(a,[{key:"render",value:function(){return r.a.createElement(we.a,{type:"Oval",color:"#e91e63",height:75,width:75,timeout:3e3})}}]),a}(r.a.Component);a(183);var Ae={setTreatment:function(e){return function(){var t=Object(k.a)(w.a.mark((function t(a){return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,a(V(e));case 3:t.next=8;break;case 5:t.prev=5,t.t0=t.catch(0),console.log("TreatmentActions: err in setTreatment",t.t0);case 8:case"end":return t.stop()}}),t,null,[[0,5]])})));return function(e){return t.apply(this,arguments)}}()},updateActiveStep:me},xe=Object(o.g)(Object(d.b)((function(e){return{treatment:e.TreatmentReducer.treatment,activeStep:e.StepperReducer.step}}),Ae)((function(e){return r.a.createElement("div",{className:"daily-slots flex column align-center space-between"},e.timeSlots.map((function(t){return r.a.createElement("button",{onClick:function(){return function(t,a,n){e.updateActiveStep(e.activeStep+n);var r={time:t,date:a};e.setTreatment(r),e.history.push("/form")}(t,e.date,1)},className:"timeslot-btn",key:F.idGen()},t)})))})));a(184);function Ne(e){return console.log(e.timeSlots),r.a.createElement("div",{className:"timeslot-list flex"},Object.keys(e.timeSlots).map((function(t){var a=e.timeSlots[t][0].start.slice(0,10),n=F.getDailySlotsForPreview(e.timeSlots[t],30);return r.a.createElement("div",{key:F.idGen()},r.a.createElement("div",{className:"date-container"},r.a.createElement("div",null,F.getDayByHebrewWord(new Date(e.timeSlots[t][0].start).getDay())),F.convertDateToIsraelisDisplay(a)),r.a.createElement(xe,{timeSlots:n,date:a}))})))}var De={sendEmail:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=arguments.length>3?arguments[3]:void 0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"",o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"",s="\u05e0\u05d9\u05d9\u05dc \u05e1\u05dc\u05d5\u05df",l="";l=n?"        \u05e9\u05dc\u05d5\u05dd ".concat(e," ,\n\n        \u05e9\u05de\u05d7\u05d9\u05dd \u05e9\u05d1\u05d7\u05e8\u05ea ").concat(s," !\n        \u05e0\u05e7\u05d1\u05e2 \u05dc\u05da \u05ea\u05d5\u05e8 \u05dc").concat(o,"  \n        \u05d1\u05ea\u05d0\u05e8\u05d9\u05da ").concat(t,"\n        \u05d1\u05e9\u05e2\u05d4 ").concat(i,"\n        \u05de\u05e9\u05da \u05d6\u05de\u05df \u05d4\u05d8\u05d9\u05e4\u05d5\u05dc \u05de\u05d5\u05e2\u05e8\u05da \u05db- ").concat(c," \u05d3\u05e7\u05d5\u05ea\n        \u05d4\u05d8\u05dc\u05e4\u05d5\u05df \u05e9\u05d4\u05ea\u05e7\u05d1\u05dc \u05dc\u05d9\u05e6\u05d9\u05e8\u05ea \u05e7\u05e9\u05e8 \u05d4\u05d5\u05d0 - ").concat(r,"\n        \n        \u05ea\u05d5\u05d3\u05d4"):"\n        \u05e9\u05dc\u05d5\u05dd,\n         ".concat(e,"\n        \u05d4\u05ea\u05d5\u05e8 \u05e9\u05e0\u05e7\u05d1\u05e2 \u05dc\u05ea\u05d0\u05e8\u05d9\u05da ").concat(t," \u05d1\u05d5\u05d8\u05dc \n        \u05ea\u05d5\u05d3\u05d4 \u05e2\u05dc \u05d4\u05e2\u05d3\u05db\u05d5\u05df ");var u={email:a,bodyText:l};return I("email",u)}};var Ce={getCalendar:function(){return Re.apply(this,arguments)},getAvailbleDailySlots:function(e,t,a){return Pe.apply(this,arguments)},update:Me,remove:function(e){return Fe.apply(this,arguments)},saveConfirmedEvent:Ue,getEventByPhone:function(e){return _("calendar/".concat(e))},removeEventFromDB:function(e){return console.log(e),P("calendar/".concat(e))},setAppointment:function(e,t,a,n,r,c){return Be.apply(this,arguments)}},_e="calendar_YmFydmFydGVzdEBnbWFpbC5jb20",Ie="Bearer gVTIuU0seE73kvJqfCyLS8uFYV3cwm";function Re(){return(Re=Object(k.a)(w.a.mark((function e(){var t,a;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D()({method:"get",url:"https://api.kloudless.com/v1/accounts?enabled=True",headers:{Authorization:Ie}});case 2:return t=e.sent,a=t.data.objects[0],e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Pe(){return(Pe=Object(k.a)(w.a.mark((function e(t,a,n){var r;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D()({method:"post",url:"https://api.kloudless.com/v1/accounts/".concat("416457905","/cal/availability"),headers:{Authorization:Ie,"Content-Type":"application/json"},data:JSON.stringify({meeting_duration:"PT".concat(n),time_windows:[{start:t,end:a}]})});case 2:return r=e.sent,e.abrupt("return",r.data.time_windows);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Me(e,t,a,n,r){var c="https://api.kloudless.com/v1/accounts/".concat("416457905","/cal/calendars/primary/events");return fetch(c,{method:"post",headers:{Authorization:Ie,"Content-Type":"application/json"},body:JSON.stringify({name:"".concat(n," - ").concat(a),description:a,start:e,end:t})}).then((function(e){return e.json()})).then((function(e){return e}))}function Ue(e){return I("calendar",e)}function Fe(){return(Fe=Object(k.a)(w.a.mark((function e(t){var a,n;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="https://api.kloudless.com/v1/accounts/".concat("416457905","/cal/calendars/").concat(_e,"/events/").concat(t),e.next=3,D()(a,{method:"delete",headers:{Authorization:Ie}});case 3:n=e.sent,console.log(n.data);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Be(){return(Be=Object(k.a)(w.a.mark((function e(t,a,n,r,c,i){var o,s,l,u,m;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=F.changeTimeForDisplay(i.time,3),s="".concat(i.date,"T").concat(o,":00Z"),o=F.calculateEndTime(o,a),l="".concat(i.date,"T").concat(o,":00Z"),e.next=6,Me(s,l,t,c);case 6:u=e.sent,Ue(m={name:c,email:r,phone:n,eventId:u.id,treatments:t,duration:a,startTime:s.slice(11,20),endTime:l.slice(11,20),date:s.slice(0,10)}),console.log(m),De.sendEmail(c,i.date,r,!0,n,a,i.time,t);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Le(e){return{type:"SET_TIMESLOTS",timeSlots:e}}a(185);var We={in:{opacity:1,x:0,textAlign:"center"},out:{opacity:0,x:"50%"}},He={duration:1.3,type:"spring",stiffness:50},Ve=Object(f.a)({overrides:{MuiPickersToolbar:{toolbar:{backgroundColor:"#e91e63"}},MuiPickersDay:{day:{color:"black"},daySelected:{backgroundColor:"#e91e63"},dayDisabled:{color:"#e91e63"},current:{color:"#e91e63"}}}});var Ge={loadTimeSlots:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(e)t=F.getIsosDate(-1,e),a=F.getIsosDate(0,e),n=F.getIsosDate(1,e);else var t=F.getIsosDate(0),a=F.getIsosDate(1),n=F.getIsosDate(2);return function(){var e=Object(k.a)(w.a.mark((function e(r){var c;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ce.getAvailbleDailySlots("".concat(t,"T05:00:00"),"".concat(t,"T17:00:00"),"1H");case 3:return e.t0=e.sent,e.next=6,Ce.getAvailbleDailySlots("".concat(a,"T05:00:00"),"".concat(a,"T17:00:00"),"1H");case 6:return e.t1=e.sent,e.next=9,Ce.getAvailbleDailySlots("".concat(n,"T05:00:00"),"".concat(n,"T17:00:00"),"1H");case 9:e.t2=e.sent,c={firstDaySlots:e.t0,secondDaySlots:e.t1,thirdDaySlots:e.t2},r(Le(c)),e.next=17;break;case 14:e.prev=14,e.t3=e.catch(0),console.log("Err getting timeslots",e.t3);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t){return e.apply(this,arguments)}}()}},ze=Object(d.b)((function(e){return{timeSlots:e.CalendarReducer.timeSlots}}),Ge)((function(e){var t=Object(n.useState)(new Date),a=Object(s.a)(t,2),c=a[0],i=a[1],o=Object(n.useState)(!0),l=Object(s.a)(o,2),u=l[0],m=l[1],p=e.loadTimeSlots;function d(){return(d=Object(k.a)(w.a.mark((function t(a){return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return m(!1),i(a),t.next=4,e.loadTimeSlots(a);case 4:m(!0);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(n.useEffect)((function(){p()}),[p]),r.a.createElement(r.a.Fragment,null,r.a.createElement(ve.a.div,{initial:"out",exit:"in",animate:"in",variants:We,transition:He},r.a.createElement("div",{className:"calendar-picker-container"},r.a.createElement(Se.a,{utils:Te.a,locale:ye.a},r.a.createElement(b.a,{theme:Ve},r.a.createElement(Oe.a,{disableToolbar:!0,variant:"dialog",okLabel:"\u05d0\u05d9\u05e9\u05d5\u05e8",cancelLabel:"\u05d1\u05d9\u05d8\u05d5\u05dc",format:"MM/dd/yyyy",margin:"normal",id:"date-picker-inline",value:c,onChange:function(e){return d.apply(this,arguments)},KeyboardButtonProps:{"aria-label":"change date"}})))),r.a.createElement("div",{className:"main-container time-slot-lists-container"},e.timeSlots&&u?r.a.createElement(Ne,{timeSlots:e.timeSlots}):r.a.createElement("div",{className:"loaderContainer flex  justify-center"},r.a.createElement(ke,null)))),r.a.createElement(fe,null))})),Je={treatment:null,treatments:null,duration:0};var Xe={step:0,steps:["\u05d8\u05d9\u05e4\u05d5\u05dc","\u05ea\u05d0\u05e8\u05d9\u05da","\u05e1\u05d9\u05d5\u05dd"]};var Ye={calendar:null,timeSlots:null,confirmedEventId:null};var Ze=a(51),qe=a(110),Ke=Object(Ze.c)({TreatmentReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Je,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_TREATMENTS":return Object(J.a)(Object(J.a)({},e),{},{treatments:t.treatments});case"SET_TREATMENT":return Object(J.a)(Object(J.a)({},e),{},{treatment:t.treatment});case"REMOVE_TREATMENT":return Object(J.a)(Object(J.a)({},e),{},{treatments:e.treatments.filter((function(e){return e._id!==t.treatmentId}))});case"UPDATE_TREATMENTS":return console.log("re",t.treatments),Object(J.a)(Object(J.a)({},e),{},{treatments:t.treatments});case"UPDATE_DURATION":return Object(J.a)(Object(J.a)({},e),{},{duration:e.duration+t.duration});case"INIT_DURATION":return Object(J.a)(Object(J.a)({},e),{},{duration:0});default:return e}},CalendarReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ye,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CALENDAR":return Object(J.a)(Object(J.a)({},e),{},{calendar:t.calendar});case"SET_TIMESLOTS":return Object(J.a)(Object(J.a)({},e),{},{timeSlots:t.timeSlots});default:return e}},StepperReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_ACTIVE_STEP":return Object(J.a)(Object(J.a)({},e),{},{step:t.step});default:return e}}}),$e=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||Ze.d,Qe=Object(Ze.e)(Ke,$e(Object(Ze.a)(qe.a))),et={initApp:function(){Qe.dispatch({type:"UPDATE_ACTIVE_STEP",step:0}),Qe.dispatch({type:"SET_TREATMENT",treatment:null}),Qe.dispatch({type:"SET_TREATMENTS",treatments:null}),Qe.dispatch({type:"SET_TIMESLOTS",timeSlots:null}),Qe.dispatch({type:"INIT_DURATION"})}};var tt=a(242),at=a(237),nt=a(192),rt=a(239),ct=(a(186),{in:{opacity:1,x:0},out:{opacity:0,x:"50%"}}),it={duration:1.3,type:"spring",stiffness:50},ot=Object(v.a)((function(e){return{modal:{display:"flex",alignItems:"center",justifyContent:"center"},paper:{backgroundColor:e.palette.background.paper,border:"2px solid #000",boxShadow:e.shadows[5],padding:e.spacing(2,4,3),color:"form-title"},input:{"& > *":{margin:e.spacing(1),width:"25ch"}}}}));var st={updateActiveStep:me,setTimeSlots:Le},lt=Object(o.g)(Object(d.b)((function(e){return{treatments:e.TreatmentReducer.treatments,treatment:e.TreatmentReducer.treatment,duration:e.TreatmentReducer.duration}}),st)((function(e){var t=ot(),a=r.a.useState(!1),c=Object(s.a)(a,2),i=c[0],o=c[1],l=r.a.useState(""),u=Object(s.a)(l,2),m=u[0],p=u[1],d=r.a.useState({name:"",phone:"",email:""}),f=Object(s.a)(d,2),v=f[0],b=f[1],h=F.convertDateToIsraelisDisplay(e.treatment.date),E=F.calculateEndTime(e.treatment.time,e.duration);function g(){et.initApp(),e.history.push("/")}function T(e){var t=e.target,a=t.name,n=t.value;switch(a){case"name":b(Object(J.a)(Object(J.a)({},v),{},{name:n}));break;case"phone":b(Object(J.a)(Object(J.a)({},v),{},{phone:n}));break;case"email":b(Object(J.a)(Object(J.a)({},v),{},{email:n}));break;default:console.log("Err updating name/phone/email")}}Object(n.useEffect)((function(){p(W.getMarkedTreatmentsStr(e.treatments))}),[e.treatments]);var y=v.name,S=v.phone,O=v.email;return r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{className:"restart-btn",onClick:g},"\u05d0\u05ea\u05d7\u05d5\u05dc  ",r.a.createElement("i",{className:"fas fa-redo-alt"})),r.a.createElement(ve.a.div,{initial:"out",exit:"in",animate:"in",variants:ct,transition:it,style:{textAlign:"center"}},r.a.createElement("div",null,r.a.createElement("form",{className:"".concat(t.input," submit-form flex column align-center"),noValidate:!0,autoComplete:"off"},r.a.createElement("div",null,r.a.createElement("div",{className:"form-title"},"\u05e9\u05dd \u05de\u05dc\u05d0 :"),r.a.createElement(rt.a,{autoFocus:!0,name:"name",id:"outlined-basic",variant:"outlined",value:y,onChange:T})),r.a.createElement("div",null,r.a.createElement("div",{className:"form-title"},"\u05d8\u05dc\u05e4\u05d5\u05df :"),r.a.createElement(rt.a,{name:"phone",id:"outlined-basic",variant:"outlined",value:S,onChange:T})),r.a.createElement("div",null,r.a.createElement("div",{className:"form-title"},"\u05de\u05d9\u05d9\u05dc :"),r.a.createElement(rt.a,{name:"email",id:"outlined-basic",variant:"outlined",value:O,onChange:T}))),r.a.createElement(tt.a,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",className:t.modal,open:i,onClose:function(){o(!1),g()},closeAfterTransition:!0,BackdropComponent:at.a,BackdropProps:{timeout:500}},r.a.createElement(nt.a,{in:i},r.a.createElement("div",{className:t.paper},r.a.createElement("h2",{id:"transition-modal-title"},"\u05d4\u05ea\u05d5\u05e8 \u05e0\u05e7\u05d1\u05e2 \u05d1\u05d4\u05e6\u05dc\u05d7\u05d4"),r.a.createElement("div",null," \u05e0\u05e7\u05d1\u05e2 \u05dc\u05da \u05ea\u05d5\u05e8 \u05dc: ",m,"  "),r.a.createElement("div",null," \u05d1\u05ea\u05d0\u05e8\u05d9\u05da ",h),r.a.createElement("div",null," \u05d1\u05d9\u05df \u05d4\u05e9\u05e2\u05d5\u05ea: ",E," - ",e.treatment.time)))))),r.a.createElement(fe,{handleOpen:function(){o(!0)},setAppointment:function(){var t=v.name,a=v.phone,n=v.email;Ce.setAppointment(m,e.duration,a,n,t,e.treatment)}}))}))),ut=(a(187),{in:{opacity:1,x:0},out:{opacity:0,x:"50%"}}),mt={duration:1.3,type:"spring",stiffness:50};var pt={updateActiveStep:me,setTimeSlots:Le},dt=Object(o.g)(Object(d.b)((function(e){return{}}),pt)((function(e){var t=Object(v.a)((function(e){return{modal:{display:"flex",alignItems:"center",justifyContent:"center"},paper:{backgroundColor:e.palette.background.paper,border:"2px solid #000",boxShadow:e.shadows[5],padding:e.spacing(2,4,3),color:"form-title"},root:{"& > *":{margin:e.spacing(1),width:"25ch",color:"#172b4d"}}}}))(),a=r.a.useState(!1),c=Object(s.a)(a,2),i=c[0],o=c[1],l=r.a.useState(""),u=Object(s.a)(l,2),m=u[0],p=u[1],d=function(){o(!0)},f=Object(n.useState)(null),b=Object(s.a)(f,2),h=b[0],E=b[1];function g(){return(g=Object(k.a)(w.a.mark((function e(){var t,a;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ce.getEventByPhone(m);case 2:t=e.sent,a=t[0],Ce.remove(a.eventId),Ce.removeEventFromDB(a._id),De.sendEmail(h.name,h.date,h.email,!1),E(null),d();case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return r.a.createElement(ve.a.div,{className:"motion-div",initial:"out",exit:"in",animate:"in",variants:ut,transition:mt},r.a.createElement("main",{className:"main-container cancel-appointment flex column align-center space-around "},r.a.createElement("div",{className:"flex align-center column"},r.a.createElement("div",{className:"cancel-form-title"},"\u05e0\u05d0 \u05dc\u05d4\u05d6\u05d9\u05df \u05de\u05e1\u05e4\u05e8 \u05d8\u05dc\u05e4\u05d5\u05df \u05dc\u05d1\u05d9\u05d8\u05d5\u05dc \u05d4\u05ea\u05d5\u05e8  :"),r.a.createElement(rt.a,{autoFocus:!0,className:t.root,name:"phone",id:"outlined-basic",variant:"outlined",value:m,onChange:function(e){var t=e.target,a=t.name,n=t.value;switch(a){case"phone":p(n),n.length>=9&&n.length<=10&&Ce.getEventByPhone(n).then((function(e){if(e[0]){var t=F.convertDateToIsraelisDisplay(e[0].date);E({treatments:e[0].treatments,startTime:F.changeTimeForDisplay(e[0].startTime,-3),endTime:F.changeTimeForDisplay(e[0].endTime,-3),date:t,email:e[0].email,name:e[0].name})}}));break;default:console.log("err in phone switch case - cancel appoinment")}}})),r.a.createElement("div",{className:"table-wrapper"},h&&r.a.createElement("div",{className:"table-title"}," \u05e4\u05e8\u05d8\u05d9 \u05d4\u05ea\u05d5\u05e8 :"),h?r.a.createElement("div",{className:"apointment-details"},r.a.createElement("div",{className:"table-cell"}," ",r.a.createElement("span",null,"\u05e1\u05d5\u05d2 \u05d4\u05d8\u05d9\u05e4\u05d5\u05dc")," : ",h.treatments),r.a.createElement("div",{className:"table-cell"}," \u05d1\u05ea\u05d0\u05e8\u05d9\u05da : ",h.date),r.a.createElement("div",{className:"last-cell"}," \u05d1\u05d9\u05df \u05d4\u05e9\u05e2\u05d5\u05ea : ","".concat(h.endTime," - ").concat(h.startTime))):r.a.createElement("div",{className:"space"})),r.a.createElement("div",{className:"space"}),h&&r.a.createElement("button",{onClick:function(){return g.apply(this,arguments)},className:"trash-btn"}," \u05de\u05d7\u05e7 \u05ea\u05d5\u05e8 ",r.a.createElement("i",{className:"fas fa-trash"})),r.a.createElement(tt.a,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",className:t.modal,open:i,onClose:function(){o(!1),et.initApp(),e.history.push("/")},closeAfterTransition:!0,BackdropComponent:at.a,BackdropProps:{timeout:500}},r.a.createElement(nt.a,{in:i},r.a.createElement("div",{className:t.paper},r.a.createElement("h2",{id:"transition-modal-title"},"\u05d4\u05ea\u05d5\u05e8 \u05d1\u05d5\u05d8\u05dc"),r.a.createElement("p",{id:"transition-modal-description"}))))))}))),ft=a(37);var vt=function(){return r.a.createElement(ft.a,null,r.a.createElement("div",{className:"App"},r.a.createElement(O,null),r.a.createElement(o.c,null,r.a.createElement(o.a,{path:"/calendar",component:ze}),r.a.createElement(o.a,{path:"/cancelAppointment",component:dt}),r.a.createElement(o.a,{path:"/form",component:lt}),r.a.createElement(o.a,{path:"/",component:ge}))))},bt=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function ht(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(d.a,{store:Qe},r.a.createElement(vt,null))),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");bt?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):ht(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):ht(t,e)}))}}()}},[[128,1,2]]]);
//# sourceMappingURL=main.9f695901.chunk.js.map